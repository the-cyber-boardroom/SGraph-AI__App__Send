# v0.1.2 â€” Security and QA Plan

**version** v0.1.2  
**date** 9 Feb 2026  
**role** Dev (Security Reviewer + QA)

## 1. Security baseline

1. Payload is always encrypted client-side before storage.
2. Backend never stores or processes plaintext payload.
3. Backend never stores decryption key.
4. Backend metadata should remain non-sensitive.
5. IP handling must support anonymisation mode.

## 2. Security review checklist

- [ ] AES-GCM flow validated in browser (key length, IV length, auth failure behavior)
- [ ] IV generated randomly for each encryption operation
- [ ] key never sent to backend routes
- [ ] payload files are encrypted bytes only
- [ ] transfer metadata excludes file names by default
- [ ] event files avoid sensitive raw values in anonymisation mode
- [ ] sender token checks enforce status/expiry/revocation
- [ ] admin lambda protected by built-in auth
- [ ] error responses avoid internal leakage
- [ ] upload/download mode switching does not bypass auth checks

## 3. QA strategy

### 3.1 Test layers

1. Unit tests for service and schema behavior.
2. Integration tests against in-memory stack (no mocks).
3. S3 integration tests against LocalStack for cloud-specific behavior.
4. E2E tests for user and admin workflows.

### 3.2 Core E2E scenarios

1. create transfer -> upload encrypted payload -> complete transfer
2. download transfer -> decrypt with valid key
3. wrong key -> clear decrypt failure
4. revoked token -> transfer create rejected
5. expired token -> transfer create rejected
6. transfer not found -> route returns not found
7. payload missing -> download endpoint returns explicit error
8. concurrent downloads -> all downloads succeed and counts are consistent

### 3.3 Additional verification

1. validate 100MB upload limit.
2. validate 1-byte upload success.
3. validate anonymisation mode records anonymised values.
4. validate action/event/request file creation per transfer.
5. validate user tools pages for cookie/localstorage inspector and API explorer.

## 4. Test execution policy

1. Default CI path uses in-memory full-stack tests first.
2. LocalStack integration tests run in integration stage.
3. Block merge on failing:
   - core transfer E2E
   - security high-severity checks
   - token auth lifecycle tests

## 5. Output deliverables

1. security review report with severity per finding.
2. QA test matrix with pass/fail status.
3. issues for unresolved defects with repro data.


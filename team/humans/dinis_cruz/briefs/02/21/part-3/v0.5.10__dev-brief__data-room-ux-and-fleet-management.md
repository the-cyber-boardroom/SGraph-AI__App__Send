# Developer Brief: Data Room UX

**version** v0.5.10  
**date** 21 Feb 2026  
**from** Human (project lead)  
**to** Developer (lead), Designer, DevOps  
**type** Developer brief â€” data room user experience and fleet management  

---

## Overview

The data room is the user-facing product. This brief covers what the user sees and interacts with: entering a data room, browsing the directory, viewing files, sending messages, and â€” on the admin side â€” creating and managing data rooms.

---

## The User Experience

### Entry: "Enter Your Data Room Key"

The data room URL is the entry point: `investor-x.send.sgraph.ai`

The user visits the URL and sees:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                    [CUSTOMER LOGO]                              â”‚
â”‚                                                                 â”‚
â”‚              Welcome to your secure data room                   â”‚
â”‚                                                                 â”‚
â”‚  Enter your data room key:                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â˜ Remember this key on this device                             â”‚
â”‚                                                                 â”‚
â”‚  [Enter Data Room]                                              â”‚
â”‚                                                                 â”‚
â”‚  â“˜ Your key never leaves this browser.                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

The key is a symmetric key â€” same type we already use for message decryption. The data room ID is what we currently call the document ID. Together, they unlock the data room.

**On entry:**

```
1. User enters their data room key
2. Browser uses the key to decrypt the data room index
   (downloaded from S3 â€” an encrypted blob containing directory 
    references, file references, menu structure, configuration)
3. If "Remember" checked â†’ key saved to localStorage (same as current behaviour)
4. Decrypted index reveals the data room structure:
   - Directory of personas (names, public keys)
   - File listing (Obj_Ids, metadata)
   - Menu structure
   - Branding configuration
5. Data room UI renders
```

### Inside the Data Room

Once unlocked, the user sees a branded environment with four sections:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [LOGO]  Investor X Data Room          [Directory] [Files]      â”‚
â”‚                                         [Messages] [Settings]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  FILES                                                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„  NDA - Mutual.pdf                        [View]      â”‚   â”‚
â”‚  â”‚     Uploaded: 20 Feb 2026                    [Download]  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ“„  Term Sheet - Draft v2.pdf                [View]      â”‚   â”‚
â”‚  â”‚     Uploaded: 21 Feb 2026                    [Download]  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ“‹  Company Overview.md                      [View]      â”‚   â”‚
â”‚  â”‚     Uploaded: 20 Feb 2026                    [Download]  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ–¼ï¸  Architecture Diagram.png                 [View]      â”‚   â”‚
â”‚  â”‚     Uploaded: 21 Feb 2026                    [Download]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [ Upload File ]                                                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### File Visualizers

When a user clicks [View], the file is decrypted in the browser and rendered inline. No download required for viewing.

| File Type | Visualizer | Implementation |
|---|---|---|
| **PDF** | In-browser PDF viewer | PDF.js (Mozilla's library). Renders in a sandboxed iframe. |
| **Markdown** | Rendered HTML | Parse markdown to HTML client-side (e.g., marked.js). Render in sandboxed iframe. |
| **Images** (PNG, JPG, SVG) | Inline image display | `<img>` tag with blob URL from decrypted content. |
| **JSON** | Syntax-highlighted viewer | Simple `<pre>` with syntax highlighting. |
| **Text** | Plain text display | `<pre>` tag. |
| **Other** | Download only | No inline preview â€” offer download. |

**Security note**: all rendering happens in sandboxed iframes (`sandbox="allow-same-origin"` â€” no scripts). PDFs can contain JavaScript. Images can exploit rendering bugs. The sandbox prevents these. This aligns with the security review approach from v0.4.11.

### Directory

The directory shows all personas registered in the data room:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DIRECTORY                                                      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤  Dinis Cruz                                          â”‚   â”‚
â”‚  â”‚     Role: Board Observer                                 â”‚   â”‚
â”‚  â”‚     Key: sha256:3a7f...c891                             â”‚   â”‚
â”‚  â”‚     [Send Message]  [View Public Key]                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ‘¤  Alice Smith                                         â”‚   â”‚
â”‚  â”‚     Role: Lead Investor                                  â”‚   â”‚
â”‚  â”‚     Key: sha256:8b2e...f443                             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ‘¤  Bob Chen                                            â”‚   â”‚
â”‚  â”‚     Role: Analyst                                        â”‚   â”‚
â”‚  â”‚     Key: sha256:c44a...b118                             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ¤–  Support Agent                                       â”‚   â”‚
â”‚  â”‚     Role: AI Agent                                       â”‚   â”‚
â”‚  â”‚     Key: sha256:d55b...c229                             â”‚   â”‚
â”‚  â”‚     [Send Message]                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [ Import Key ]  [ Add Contact ]                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

The directory data comes from the GitHub repo (persona JSON files + public keys), synced to S3, decrypted with the data room key. The user sees names and roles â€” the server sees only Obj_Ids and encrypted blobs.

### Messages / Inbox

Clicking [Send Message] on a directory entry opens a message composer. Messages are PKI-encrypted to the recipient's public key.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MESSAGES                                                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  From: Dinis Cruz                    21 Feb 2026, 10:00 â”‚   â”‚
â”‚  â”‚  "Please review the attached term sheet and let me       â”‚   â”‚
â”‚  â”‚   know your thoughts by Friday."                         â”‚   â”‚
â”‚  â”‚  ğŸ“ Term Sheet - Draft v2.pdf                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  From: Alice Smith                   21 Feb 2026, 14:30 â”‚   â”‚
â”‚  â”‚  "Reviewed â€” looks good. Two comments on section 3.      â”‚   â”‚
â”‚  â”‚   See attached markup."                                  â”‚   â”‚
â”‚  â”‚  ğŸ“ Term Sheet - Draft v2 - Alice Comments.pdf           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  To: [Alice Smith          â–¾]                          â”‚     â”‚
â”‚  â”‚                                                        â”‚     â”‚
â”‚  â”‚  Type your message...                                  â”‚     â”‚
â”‚  â”‚                                                        â”‚     â”‚
â”‚  â”‚                                                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  [ Attach File ]                              [ Send ]          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Backend**: messages are just encrypted text files on the server, stored in the same Memory-FS structure as file uploads. Each message is an Obj_Id pointing to an encrypted blob. The blob contains the message text, sender reference, timestamp, and any attachment references â€” all encrypted. The server stores the sequence (for ordering) but cannot read the content.

**Threading**: messages between two personas form a thread. The data room index tracks thread membership (which Obj_Ids belong to which conversation). A thread is fundamentally the same as a folder â€” a collection of encrypted blobs addressed by Obj_Ids.

---

## Ephemeral vs Persistent in the UI

The UI should distinguish between the two storage classes:

```
FILES
â”œâ”€â”€ ğŸ“ Data Room Documents (persistent â€” from GitHub)
â”‚   â”œâ”€â”€ ğŸ“„ NDA - Mutual.pdf
â”‚   â”œâ”€â”€ ğŸ“„ Welcome Pack.md
â”‚   â””â”€â”€ ğŸ“„ Company Overview.md
â”‚
â””â”€â”€ ğŸ“ Shared Files (ephemeral â€” uploaded by users)
    â”œâ”€â”€ ğŸ“„ Term Sheet - Draft v2.pdf          Expires: 7 days
    â”œâ”€â”€ ğŸ“„ Alice Comments.pdf                  Expires: 7 days
    â””â”€â”€ ğŸ“„ Financial Model.xlsx                Expires: 24 hours
```

Ephemeral files show their TTL. The user understands: persistent files come from the data room configuration, ephemeral files are user-uploaded and will expire.

---

## Admin: Fleet Management Page

A new page in the admin UI: `/admin/fleet.html`

This is the management plane for all data rooms. API-first â€” the UI calls the fleet management API.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin  â€º  Data Room Fleet                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [ + Create Data Room ]                                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  investor-x.send.sgraph.ai                              â”‚   â”‚
â”‚  â”‚  Status: ğŸŸ¢ RUNNING (EC2 i-0abc123, eu-west-1)         â”‚   â”‚
â”‚  â”‚  Uptime: 2h 15m                                         â”‚   â”‚
â”‚  â”‚  GitHub: github.com/sgraph/dr-investor-x                â”‚   â”‚
â”‚  â”‚  Users online: 2                                         â”‚   â”‚
â”‚  â”‚  Files: 4 persistent, 7 ephemeral                       â”‚   â”‚
â”‚  â”‚  Last sync: 21 Feb 2026, 09:00                          â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [Stop]  [Sync Now]  [View Logs]  [Configure]           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  partner-y.send.sgraph.ai                               â”‚   â”‚
â”‚  â”‚  Status: âšª STOPPED                                     â”‚   â”‚
â”‚  â”‚  Last active: 20 Feb 2026, 16:30                        â”‚   â”‚
â”‚  â”‚  GitHub: github.com/sgraph/dr-partner-y                 â”‚   â”‚
â”‚  â”‚  Files: 12 persistent, 0 ephemeral                      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [Start]  [Sync Now]  [View Logs]  [Configure]          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  legal-review.send.sgraph.ai                            â”‚   â”‚
â”‚  â”‚  Status: ğŸŸ¡ BOOTING (starting EC2...)                   â”‚   â”‚
â”‚  â”‚  GitHub: github.com/sgraph/dr-legal-review              â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [Cancel Boot]  [View Logs]                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Create Data Room Workflow

```
Admin clicks [ + Create Data Room ]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create New Data Room                       â”‚
â”‚                                             â”‚
â”‚  Subdomain: [__________].send.sgraph.ai     â”‚
â”‚  GitHub repo URL: [________________________]â”‚
â”‚  Region: [ eu-west-1            â–¾ ]         â”‚
â”‚  Instance type: [ t3.micro      â–¾ ]         â”‚
â”‚                                             â”‚
â”‚  Branding:                                  â”‚
â”‚  Logo: [ Upload ]                           â”‚
â”‚  Primary colour: [#______]                  â”‚
â”‚                                             â”‚
â”‚  Auto-shutdown after idle: [ 30 ] minutes   â”‚
â”‚                                             â”‚
â”‚  [Cancel]              [Create Data Room]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ (Create)
    â”‚
    â”œâ”€â”€ API: POST /api/fleet/rooms
    â”œâ”€â”€ Provisions DNS entry (Route53)
    â”œâ”€â”€ Provisions CloudFront distribution
    â”œâ”€â”€ Links GitHub repo
    â”œâ”€â”€ Triggers initial GitHub â†’ S3 sync
    â”œâ”€â”€ Creates AMI configuration for this data room
    â”‚
    â–¼
Data room appears in fleet list (Status: âšª STOPPED)
Admin can now [Start] it or wait for first user access (auto-boot)
```

---

## Data Room Key and Existing Infrastructure

The data room key is a symmetric key, consistent with the current SG/Send model:

| Concept | Current SG/Send | Data Room |
|---|---|---|
| **Content ID** | Document ID (Obj_Id or GUID) | Data room ID (same â€” the Obj_Id that identifies this data room) |
| **Decryption key** | Symmetric key shared via second channel | Data room key â€” symmetric key given to authorised users |
| **What it decrypts** | A single encrypted file/message | The data room index (which reveals the structure, directory, and file references) |
| **PKI layer** | Optional (encrypt to recipient's public key) | Used for person-to-person messages within the data room |

The data room ID + key is essentially a "super-document" â€” instead of decrypting one file, it decrypts the index to an entire environment.

---

## File Structure

```
/admin/
â”œâ”€â”€ index.html              â† existing
â”œâ”€â”€ pki.html                â† existing (PKI key management)
â”œâ”€â”€ key-lookup.html         â† existing (key discovery)
â”œâ”€â”€ key-registry.html       â† existing (public key registry)
â”œâ”€â”€ fleet.html              â† NEW: data room fleet management
â”œâ”€â”€ fleet.js                â† NEW
â””â”€â”€ shared/
    â””â”€â”€ pki-common.js       â† existing shared utilities
```

The data room UI itself is served by the EC2 instance, not from the admin panel. The admin panel manages the fleet; the data room is the user-facing product.

---

## Acceptance Criteria

### Fleet Management (Admin)

| # | Criterion |
|---|---|
| 1 | Can create a new data room with subdomain, GitHub repo link, region |
| 2 | Fleet page shows all data rooms with current status (running/stopped/booting) |
| 3 | Can start a stopped data room (triggers EC2 boot) |
| 4 | Can stop a running data room (syncs ephemeral data, terminates EC2) |
| 5 | Can trigger a GitHub â†’ S3 sync for a data room |
| 6 | All operations are API calls â€” UI is a convenience layer |

### Data Room UX (User-Facing)

| # | Criterion |
|---|---|
| 7 | User can enter data room key and unlock the data room |
| 8 | Key can be saved to localStorage for return visits |
| 9 | Directory shows all personas with names, roles, and key fingerprints |
| 10 | Files section shows persistent (GitHub) and ephemeral (user-uploaded) files separately |
| 11 | Ephemeral files show TTL / expiry |
| 12 | Can view PDFs inline (PDF.js, sandboxed iframe) |
| 13 | Can view markdown inline (rendered HTML, sandboxed iframe) |
| 14 | Can view images inline |
| 15 | Can upload a file to the data room (encrypted, ephemeral, with TTL) |
| 16 | Can send a PKI-encrypted message to a directory contact |
| 17 | Messages display as a thread between two personas |
| 18 | Custom branding (logo, colours) renders from config |

### EC2 Ephemeral Instance (DevOps â€” can run in parallel)

| # | Criterion |
|---|---|
| 19 | Can create an EC2 instance from AMI |
| 20 | Instance boots and runs FastAPI server |
| 21 | Lambda can push config to instance via admin API |
| 22 | Instance serves the data room UI on port 443 |
| 23 | Instance has no egress (fully isolated) |
| 24 | Instance shuts down after idle timeout |
| 25 | DNS routes to Lambda when instance is down, to EC2 when instance is up |

---

This document is released under the Creative Commons Attribution 4.0 International licence (CC BY 4.0). You are free to share and adapt this material for any purpose, including commercially, as long as you give appropriate credit.

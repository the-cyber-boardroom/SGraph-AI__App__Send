# Brief: PKI Strategic Embrace and Investor Deployment — Follow-On

**version** v0.4.17  
**date** 19 Feb 2026  
**classification** B3 as B1 / D1 (continuation of investor opportunity)  
**from** Human (project lead)  
**to** Architect (lead), Developer, DevOps, Designer, AppSec, Accountant  
**type** Follow-on to v0.4.12 business incident — PKI strategy + dedicated deployment  

---

## Part 1: PKI as a Strategic Commitment

The investor meeting didn't just validate PKI as a feature — it validated it as the **strategic direction**.

The human's position: embrace PKI fully. The same way the project aligned with the semantic web (well-thought-through, well-designed, proven concepts), align with the current state of the art in PKI. This isn't a bolt-on feature. It's the identity layer for everything we do.

**Why now**: there's an industry push for stronger digital identities coming. Browser vendors are investing in credential management. Passkeys are replacing passwords. Certificate-based authentication is maturing. PKI is moving from "enterprise IT plumbing" to "user-facing identity infrastructure." We should be ahead of this, not behind it.

### Research: Where Is PKI in 2026?

Before building, we need to understand the current landscape:

| Question | Owner |
|---|---|
| What's the current state of browser-native PKI? What do Chrome, Firefox, Safari support natively? | Architect, Developer |
| Firefox specifically — what privacy-conscious PKI features have they built? (Expectation: they should be ahead here) | Developer |
| What JavaScript/HTML/browser-based PKI libraries exist? What's battle-tested? | Developer |
| What browser extensions exist for key management? | Developer |
| What's the state of the Web Crypto API for asymmetric operations? (Key generation, signing, encryption, storage) | Developer |
| Where do people publish public keys today? Key servers, DNS records (DANE), HTTPS (Web Key Directory), blockchain-based? | Architect, AppSec |
| What's the current state of S/MIME in email clients? Does Gmail support it? Outlook? | Architect |
| Can we leverage the browser's built-in certificate store from a web application? | Architect |

---

## Part 2: PKI on the Admin Side First

The admin interface is the safe place to experiment — it can break more, iterate faster, and implement multiple approaches without touching the public-facing product.

### FastAPI Client Certificate Authentication

**The idea**: add client-side certificate support to the FastAPI server. This enables:

1. **Authentication via certificate**: instead of (or in addition to) access tokens, authenticate with a client certificate. The browser presents a certificate, FastAPI validates it. No passwords, no tokens to leak.

2. **Authorisation via certificate**: different certificates grant different access levels. An admin certificate gets admin access. A user certificate gets user access. A partner certificate gets partner access. The certificate IS the identity.

3. **Encryption key extraction**: can we extract a public key from the client certificate and use it to encrypt content for that specific user? If yes, the certificate becomes both the identity AND the encryption key — one artefact for both authentication and end-to-end encryption.

**Architect**: FastAPI supports TLS client certificates via its ASGI server (Uvicorn) or via a reverse proxy (nginx, CloudFront). Research the options:

| Approach | How It Works | Complexity |
|---|---|---|
| **Uvicorn + client certs** | Configure Uvicorn to require client certificates. FastAPI middleware extracts the certificate. | Medium |
| **CloudFront + mutual TLS** | CloudFront validates client certificates at the edge. Passes certificate info to Lambda via headers. | Medium — AWS-specific |
| **API Gateway + mutual TLS** | API Gateway supports mutual TLS. Validates client certs before routing to Lambda. | Medium — AWS-specific |

### Admin PKI Management UI

Build a PKI management interface in the admin panel:

1. **Generate key pairs** — create RSA/ECDSA/Ed25519 key pairs in the browser
2. **View keys** — list all keys in localStorage (connects to the localStorage visualisation work already planned)
3. **Export public keys** — share a public key via SG/Send link or short code
4. **Import public keys** — import someone else's public key
5. **Generate certificates** — self-signed certificates for testing, or CSR generation for CA-signed certificates
6. **Manage certificates** — view, import, export, delete certificates
7. **Test encryption** — encrypt/decrypt test content using the managed keys to verify everything works

This is localStorage-based. Keys live in the browser. The server never sees private keys. This aligns with the zero-knowledge model.

**Important design principle from the human**: this is about **short-term data transfers, not long-term storage.** The keys enable secure communication. They're not a permanent vault. The mental model is "I need to send something to this person securely" not "I need to store my entire key ring forever." Keep it transitional.

---

## Part 3: "Send the Private Key" Mode

An interesting variation the human wants explored:

**Current model**: sender encrypts with a symmetric key, sends the link via one channel, sends the key via another.

**PKI model**: sender encrypts with the recipient's public key, sends the link. Recipient decrypts with their private key. No key exchange.

**New mode — "send the private key"**: sender generates a key pair specifically for this transfer. Encrypts the content with the public key. Sends the **private key** to the recipient via SG/Send's secure channel. The recipient uses the private key to decrypt.

Why would you do this instead of symmetric encryption?

- It's a stepping stone toward full PKI — users get familiar with the concept of public/private keys
- The sender can later publish the public key, allowing anyone with it to verify the content's integrity
- It enables forward secrecy patterns — each transfer gets its own key pair, so compromising one doesn't compromise others

**Architect + AppSec**: evaluate this mode. Is there a genuine security advantage over the current symmetric model? Or is it complexity without benefit? The human wants it explored, not necessarily shipped.

---

## Part 4: Dedicated Deployment for the Investor Group

### The Goal

Deploy a dedicated SG/Send instance for the investor group. Show them it running with their branding, in their preferred region, isolated from the shared instance.

**Why this matters**: "Nothing proves it as much as showing we can." A live, branded, dedicated instance is worth more than any slide deck. And if we can't convince these "friendlies" to become paying clients, we have a problem.

### What to Deploy

| Deliverable | Description | Owner |
|---|---|---|
| **Dedicated instance** | Full SG/Send deployment on a separate AWS stack (or GCP, to demonstrate multi-cloud) | DevOps |
| **Custom branding** | Their logo, their colours, their domain (or a subdomain like `investor-name.send.sgraph.ai`) | Designer, DevOps |
| **Multiple deployment options** | Show them 2–3 deployment variants: AWS serverless, Docker on GCP Cloud Run, ephemeral instance | DevOps |
| **Multi-region demo** | Deploy in 2–3 regions (eu-west-1, us-east-1, ap-southeast-1) to show global capability | DevOps |
| **Ephemeral deployment** | Demonstrate spinning up a fresh instance on demand and tearing it down after use — show the infrastructure is disposable | DevOps |

### Showing What's Possible

The deployment demos should showcase different scenarios:

1. **"Here's your branded instance"** — custom logo, custom domain, running now, use it today
2. **"Here's a data room"** — a deployment configured for due diligence document exchange, with expiring links and download limits
3. **"Here's an ephemeral instance"** — spun up for a specific deal, torn down when the deal closes. Infrastructure as disposable as the messages.
4. **"Pick the one you want"** — send them links to multiple deployments. Let them choose which model fits their workflow.

### Cost Tracking

**Accountant + DevOps**: track the actual cost of each deployment:

| What to Measure | Why |
|---|---|
| Cost to provision a new stack (Lambda, S3, CloudFront, API Gateway) | What does it cost us to onboard a new dedicated customer? |
| Monthly running cost of an idle dedicated instance | What's the baseline cost? |
| Monthly running cost under light usage (10–50 transfers/day) | What does a typical customer cost us? |
| Cost comparison: AWS serverless vs Docker on GCP Cloud Run vs EC2 | Which deployment model is most cost-effective? |
| Cost of multi-region deployment | What's the premium for global availability? |
| Cost of ephemeral instances (spin up, use for a week, tear down) | What's the per-deal cost model? |

This feeds directly into pricing. If a dedicated instance costs £5/month to run idle and £15/month under light usage, we know our floor price. The Accountant should have these numbers before the next investor meeting.

### Link to Partner Ecosystem

This dedicated deployment work is the same work required for the partner ecosystem (v0.4.10 brief). Every one-click deployment template we build for the investor demo is reusable for partners. Every multi-region deployment is a proof point for the marketplace listing.

**DevOps**: treat this as the first real deployment of the one-click templates. The investor is the first "customer" of our deployment pipeline.

---

## Part 5: The Marketplace Path

The progression:

```
Manual deployment (today)
    → Scripted deployment (CloudFormation/Terraform)
        → One-click deploy (AWS Marketplace, GCP Marketplace)
            → Self-service (customer deploys from marketplace with a credit card)
```

The investor demo is step 2. The marketplace is step 3. We're building toward self-service.

**DevOps + Architect**: when building the dedicated deployment for the investor, ensure the templates are parameterised (domain name, branding, region, stack name). These same templates become the marketplace listing.

---

## Summary of Deliverables

| Task | Owner | Priority |
|---|---|---|
| PKI landscape research (browser capabilities, libraries, key servers, S/MIME) | Architect, Developer | D1 |
| FastAPI client certificate support (authentication + authorisation) | Developer, Architect | D2 |
| Admin PKI management UI (generate, store, export, import keys) | Developer, Designer | D1 |
| Explore "send the private key" mode (evaluate security vs complexity) | Architect, AppSec | D3 |
| Deploy dedicated instance for investor group (branded, custom domain) | DevOps | D1 |
| Deploy multi-region demo (2–3 regions) | DevOps | D2 |
| Deploy ephemeral instance demo (spin up / tear down) | DevOps | D2 |
| Custom branding (logo, colours) for investor instance | Designer, DevOps | D2 |
| Track deployment costs per instance type | Accountant, DevOps | D2 |
| Create data room demo deployment | DevOps, Designer | D2 |
| Browser PKI research: Firefox privacy features, Chrome Web Crypto, extension APIs | Developer | D1 |
| Ensure deployment templates are parameterised for marketplace reuse | DevOps, Architect | D2 |

---

This document is released under the Creative Commons Attribution 4.0 International licence (CC BY 4.0). You are free to share and adapt this material for any purpose, including commercially, as long as you give appropriate credit.

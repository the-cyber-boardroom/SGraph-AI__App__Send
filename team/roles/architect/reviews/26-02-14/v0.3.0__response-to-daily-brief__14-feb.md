# v0.3.0 -- Architect Response: Admin UI Component Architecture

**Version:** v0.3.0
**Date:** 14 February 2026
**Role:** Architect
**Context:** Response to `team/humans/dinis_cruz/briefs/02/14/v0.3.0__daily-brief__sgraph-send-14-feb-2026.md` -- Priority 1: Admin UI design
**Continues from:** `v0.2.41__review__osbot-ecosystem-architecture-assessment.md` (three-pillar assessment)
**References:**
- IFD guide: `library/guides/development/ifd/v1.2.1__ifd__intro-and-how-to-use.md`
- IFD Web Components guide: `library/guides/development/ifd/ifd__issues-fs/v0.1.8__ifd__web-components-and-shell.md`
- Admin config: `sgraph_ai_app_send/lambda__admin/admin__config.py`
- Token routes: `sgraph_ai_app_send/lambda__admin/fast_api/routes/Routes__Tokens.py`
- Analytics routes: `sgraph_ai_app_send/lambda__admin/fast_api/routes/Routes__Analytics.py`
- Dev brief: `team/roles/dev/briefs/v0.2.41__dev-brief__ui-token-integration-and-service-registry.md`

---

## 1. Executive Summary

The admin Lambda has a complete backend (token CRUD, analytics pulse, system info) but the UI is a placeholder (`"IFD version v0.1.0 will go here"`). This review defines the Web Component architecture for the admin console v0.1.0, following IFD methodology and the shell/router pattern established in the IFD Web Components guide.

The design produces four main components (token management, analytics dashboard, system info, event browser) managed by a shell component, communicating via CustomEvents, and calling the admin API endpoints directly using a thin API client. No frameworks, no external dependencies, no Shadow DOM.

---

## 2. Component Architecture

### 2.1 Component Hierarchy

```
<admin-shell>                              (application shell -- layout, nav, routing)
  |
  +-- <admin-token-manager>                (main app -- token CRUD operations)
  |     +-- token list view
  |     +-- token create form
  |     +-- token detail/revoke actions
  |
  +-- <admin-analytics-dashboard>          (main app -- traffic pulse, request monitoring)
  |     +-- pulse display (active requests, visitors, transfers)
  |     +-- auto-refresh toggle
  |
  +-- <admin-system-info>                  (main app -- version, service health, config)
  |     +-- version display
  |     +-- service info from /info endpoint
  |
  +-- <admin-event-browser>                (sidebar app -- raw analytics event viewer)
        +-- event list with filtering
        +-- event detail view
```

### 2.2 Shell Layout

```
+-------------------------------------------------------------------+
| SGraph Send Admin Console                    v0.3.0    [status]    |
+--------+------------------------------------------+---------------+
|        |                                          |               |
| Nav    |  Main Area                               | Sidebar       |
|        |                                          | (Events)      |
| Tokens |  (one main app visible at a time)        |               |
| Pulse  |                                          | [Events tab]  |
| System |  <admin-token-manager>                   |               |
|        |  <admin-analytics-dashboard>              |               |
|        |  <admin-system-info>                      |               |
|        |                                          |               |
+--------+------------------------------------------+---------------+
| Status: Connected | Active App: Token Manager | API: OK          |
+-------------------------------------------------------------------+
```

The shell follows the exact pattern from `v0.1.8__ifd__web-components-and-shell.md`:
- Left nav with app selection
- Main area showing one app at a time
- Right sidebar for event monitoring
- Footer status bar

### 2.3 Component Registration

```javascript
// Admin shell nav sections
const NAV_SECTIONS = [
    { id: 'admin', label: 'Administration', icon: 'shield',
      apps: ['admin-token-manager', 'admin-analytics-dashboard', 'admin-system-info'] }
];

// Sidebar apps
const SIDEBAR_APPS = ['admin-event-browser'];
```

Registration follows the IFD shell contract:

```javascript
document.addEventListener('DOMContentLoaded', () => {
    requestAnimationFrame(() => {
        window.adminApp.router.register(AdminTokenManager);
        window.adminApp.router.register(AdminAnalyticsDashboard);
        window.adminApp.router.register(AdminSystemInfo);
        window.adminApp.router.register(AdminEventBrowser);
    });
});
```

---

## 3. API Contract Mapping

### 3.1 Component-to-Endpoint Mapping

| Component | Endpoint | Method | Purpose |
|-----------|----------|--------|---------|
| `<admin-token-manager>` | `/tokens/create` | POST | Create a new token |
| `<admin-token-manager>` | `/tokens/lookup/{token_name}` | GET | View token details |
| `<admin-token-manager>` | `/tokens/use/{token_name}` | POST | Record token usage (testing) |
| `<admin-token-manager>` | `/tokens/revoke/{token_name}` | POST | Revoke a token |
| `<admin-token-manager>` | `/tokens/list` | GET | List all tokens |
| `<admin-analytics-dashboard>` | `/health/pulse` | GET | Traffic pulse (request counts) |
| `<admin-analytics-dashboard>` | `/health/pulse?window_minutes=N` | GET | Custom window pulse |
| `<admin-system-info>` | `/info/version` | GET | Application version |
| `<admin-system-info>` | `/info/status` | GET | Service status |
| `<admin-event-browser>` | `/health/pulse` | GET | Raw event data (via pulse) |

### 3.2 API Client Architecture

A single `admin-api-client.js` module handles all API communication:

```javascript
// js/admin-api-client.js
class AdminApiClient {
    constructor() {
        this.baseUrl = '';                       // Same origin (admin Lambda serves UI)
        this.apiKey  = null;                     // Set during authentication
    }

    async request(method, path, body = null) {
        const headers = { 'Content-Type': 'application/json' };
        if (this.apiKey) {
            headers[this.apiKeyName] = this.apiKey;
        }

        const options = { method, headers };
        if (body) options.body = JSON.stringify(body);

        const response = await fetch(`${this.baseUrl}${path}`, options);
        if (!response.ok) {
            throw new ApiError(response.status, await response.text());
        }
        return response.json();
    }

    // Token operations
    async tokenCreate(tokenName, usageLimit = 50, createdBy = 'admin') { ... }
    async tokenLookup(tokenName)  { ... }
    async tokenUse(tokenName)     { ... }
    async tokenRevoke(tokenName)  { ... }
    async tokenList()             { ... }

    // Analytics operations
    async pulse(windowMinutes = 5) { ... }

    // System operations
    async info()    { ... }
    async version() { ... }
}

window.adminApp = window.adminApp || {};
window.adminApp.api = new AdminApiClient();
```

### 3.3 API Authentication Flow

The admin Lambda requires an API key on all requests (this is the default behaviour of `Serverless__Fast_API` -- `enable_api_key` is True by default). The admin UI must obtain the API key before making any API calls.

**Authentication approach:** The API key is provided via a login form on first load and stored in `sessionStorage` (not `localStorage` -- cleared when browser tab closes). See Section 6 (Security Boundaries) for the full rationale.

```
1. Admin opens /admin                        (redirect to v0/v0.1/v0.1.0/index.html)
2. Shell renders login form                  (API key input field)
3. Admin enters API key                      (paste or type)
4. Shell calls /info/version with key        (validation request)
5. If 200 -> store key in sessionStorage     (session-scoped)
6.         -> render full admin console       (components activate)
7. If 401 -> show error, re-prompt           (invalid key)
```

---

## 4. Component Specifications

### 4.1 `<admin-token-manager>` -- Token Management Panel

**Static registration:**
```javascript
static get appId()    { return 'admin-token-manager'; }
static get navLabel() { return 'Tokens'; }
static get navIcon()  { return 'key'; }
```

**Views:**

| View | Trigger | Content |
|------|---------|---------|
| **List view** (default) | `onActivate()` | Table of all tokens: name, status, usage_count/usage_limit, created_by. Action buttons: View, Revoke. |
| **Create view** | "New Token" button | Form: token_name (required), usage_limit (default 50), created_by (default "admin"), metadata (optional JSON). Submit calls `POST /tokens/create`. |
| **Detail view** | Click token name | Full token data from `GET /tokens/lookup/{name}`. Usage bar (count/limit). Revoke button. Usage event history. |

**Events emitted:**
- `token-created` -- `detail: { token_name, cache_id }` -- after successful creation
- `token-revoked` -- `detail: { token_name }` -- after successful revocation
- `token-selected` -- `detail: { token_name }` -- when navigating to detail view

**Events consumed:**
- `api-authenticated` -- trigger initial data load

**Data flow:**
```
[Create Form] --(POST /tokens/create)--> API --> [token-created event]
                                                       |
                                                       v
                                              [Token List refreshes]

[Token Row] --(click)--> [token-selected event] --> [Detail View]
                                                       |
                                                       v
                                              (GET /tokens/lookup/{name})

[Revoke Button] --(POST /tokens/revoke/{name})--> API --> [token-revoked event]
                                                                |
                                                                v
                                                       [Token List refreshes]
```

### 4.2 `<admin-analytics-dashboard>` -- Analytics Dashboard

**Static registration:**
```javascript
static get appId()    { return 'admin-analytics-dashboard'; }
static get navLabel() { return 'Pulse'; }
static get navIcon()  { return 'activity'; }
```

**Sections:**

| Section | Source | Content |
|---------|--------|---------|
| **Pulse cards** | `GET /health/pulse` | Three metric cards: Active Requests, Active Visitors, Active Transfers. Window selector (1m, 5m, 15m, 60m). |
| **Auto-refresh** | setInterval | Toggle button. When enabled, polls `/health/pulse` every 10 seconds. Visual indicator when refreshing. |
| **Last updated** | Local timestamp | Shows when data was last fetched. |

**Events emitted:**
- `pulse-updated` -- `detail: { active_requests, active_visitors, active_transfers }` -- on each pulse fetch

**Data flow:**
```
[onActivate] --> GET /health/pulse?window_minutes=5
                     |
                     v
              [Render pulse cards]
                     |
              [If auto-refresh ON]
                     |
                     v
              [setInterval 10s] --> GET /health/pulse --> [pulse-updated event]
                                                               |
                                                               v
                                                    [Update pulse cards]
```

### 4.3 `<admin-system-info>` -- System Information

**Static registration:**
```javascript
static get appId()    { return 'admin-system-info'; }
static get navLabel() { return 'System'; }
static get navIcon()  { return 'info'; }
```

**Sections:**

| Section | Source | Content |
|---------|--------|---------|
| **Version** | `GET /info/version` | Application version, build info |
| **Service status** | `GET /info/status` | Service name, uptime, configuration |
| **Configuration** | Static display | Admin Lambda name, UI version, route paths |

### 4.4 `<admin-event-browser>` -- Event Sidebar

**Static registration:**
```javascript
static get appId()    { return 'admin-event-browser'; }
static get navLabel() { return 'Events'; }
static get navIcon()  { return 'list'; }
```

This is a **sidebar app** (tabbed panel on the right). It displays a live feed of events:
- Token creation/usage/revocation events
- Pulse data updates
- API call log (all fetch requests made by the admin UI)

---

## 5. CSS Variable Theme Support

### 5.1 Theme Architecture

All components use CSS custom properties for theming. The shell defines the theme variables on `:root`:

```css
:root {
    /* Layout */
    --admin-nav-width:           220px;
    --admin-sidebar-width:       320px;
    --admin-header-height:       48px;
    --admin-footer-height:       32px;

    /* Colours -- Dark theme (default for admin) */
    --admin-bg-primary:          #1a1a2e;
    --admin-bg-secondary:        #16213e;
    --admin-bg-surface:          #0f3460;
    --admin-text-primary:        #e8e8e8;
    --admin-text-secondary:      #a0a0b0;
    --admin-text-muted:          #6c6c7c;
    --admin-accent:              #e94560;
    --admin-accent-hover:        #ff6b81;
    --admin-border:              #2a2a4a;
    --admin-success:             #00d2d3;
    --admin-warning:             #feca57;
    --admin-error:               #ff6b6b;

    /* Typography */
    --admin-font-family:         'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    --admin-font-size-base:      14px;
    --admin-font-size-sm:        12px;
    --admin-font-size-lg:        16px;
    --admin-font-size-xl:        20px;

    /* Spacing */
    --admin-spacing-xs:          4px;
    --admin-spacing-sm:          8px;
    --admin-spacing-md:          16px;
    --admin-spacing-lg:          24px;
    --admin-spacing-xl:          32px;

    /* Component-specific */
    --admin-card-radius:         8px;
    --admin-card-shadow:         0 2px 8px rgba(0,0,0,0.3);
    --admin-input-bg:            #1a1a2e;
    --admin-input-border:        #3a3a5a;
    --admin-input-focus:         #e94560;
    --admin-table-row-hover:     rgba(233, 69, 96, 0.1);
    --admin-badge-active:        #00d2d3;
    --admin-badge-revoked:       #ff6b6b;
    --admin-badge-exhausted:     #feca57;
}
```

### 5.2 Theme Switching

Theme switching is a CSS-only operation. A light theme override:

```css
:root[data-theme="light"] {
    --admin-bg-primary:          #f5f5f5;
    --admin-bg-secondary:        #ffffff;
    --admin-bg-surface:          #e8e8e8;
    --admin-text-primary:        #1a1a1a;
    --admin-text-secondary:      #4a4a4a;
    /* ... remaining overrides ... */
}
```

Per D021 (five CSS-variable themes), the admin UI ships with dark theme as default. Additional themes can be added as surgical overrides in v0.1.1+ without touching v0.1.0 files.

### 5.3 Component CSS Pattern

Each component uses the `--admin-*` variables and prefixes its CSS classes:

```css
/* Token Manager uses 'atm-' prefix */
.atm-container     { background: var(--admin-bg-secondary); }
.atm-header        { color: var(--admin-text-primary); }
.atm-table         { border: 1px solid var(--admin-border); }
.atm-row:hover     { background: var(--admin-table-row-hover); }
.atm-badge-active  { background: var(--admin-badge-active); }
.atm-badge-revoked { background: var(--admin-badge-revoked); }
```

| Component | CSS Prefix | Rationale |
|-----------|-----------|-----------|
| `admin-shell` | `ash-` | Shell layout, nav, footer |
| `admin-token-manager` | `atm-` | Token list, create form, detail view |
| `admin-analytics-dashboard` | `aad-` | Pulse cards, auto-refresh controls |
| `admin-system-info` | `asi-` | Version display, service status |
| `admin-event-browser` | `aeb-` | Event feed, event detail |

---

## 6. Security Boundaries

### 6.1 API Key Handling in Browser

**Rule: The API key MUST NOT be hardcoded in JavaScript files.**

The API key lifecycle in the admin UI:

| Stage | Where | Storage | Duration |
|-------|-------|---------|----------|
| Entry | Login form in `<admin-shell>` | Form input (memory) | Until submitted |
| Validation | `GET /info/version` with key header | In-flight | Request duration |
| Storage | `sessionStorage` | Browser session | Until tab closes |
| Usage | Every API call via `AdminApiClient` | Request header | Request duration |

**Why `sessionStorage` and not `localStorage`:**
- `sessionStorage` is cleared when the tab/window closes -- the key does not persist
- `sessionStorage` is not shared between tabs -- a second tab requires re-authentication
- `localStorage` would persist the key across browser restarts, creating a credential exposure risk
- The admin console is not a frequently-used tool -- re-entering the key per session is acceptable UX

**Why not a cookie:**
- D025 (no-cookie policy) prohibits cookies
- Cookie-based auth would be sent on every request including static file loads
- The API key header approach sends credentials only on API calls

### 6.2 Admin UI Isolation

The admin UI runs on the admin Lambda URL, which is separate from the user Lambda URL:

```
User Lambda:   https://send.sgraph.ai          (public, no API key required for UI)
Admin Lambda:  https://admin.send.sgraph.ai    (authenticated, API key on all requests)
```

The admin Lambda's `enable_api_key=True` (default in `Serverless__Fast_API`) means ALL routes -- including static file serving -- require the API key. This is the correct architecture: the admin UI itself is behind auth.

**Exception for static files:** The admin UI HTML/JS/CSS files are served from the admin Lambda via `StaticFiles` mount. These static file requests also require the API key because the middleware applies to all routes. This means the initial page load requires the key. Two approaches:

**Approach A (recommended): Bootstrapped login page.** The admin Lambda serves a minimal login page at `/admin` that does NOT require the API key (exempt route). This page contains only the login form. After successful authentication, it redirects to the full admin UI (which now has the key in sessionStorage for subsequent static file loads).

**Approach B: Key in URL parameter for initial load.** The admin URL includes the key as a query parameter for the first load. The shell extracts it, stores in sessionStorage, and removes it from the URL via `history.replaceState`. This is simpler but puts the key in browser history and server logs.

**Recommendation: Approach A.** Exempt the login page from API key auth. All other routes remain authenticated.

### 6.3 Data Sensitivity in Admin UI

Per the AppSec review (`v0.2.40__review__cache-service-architecture-response.md`, Section 5), all data displayed in the admin UI is non-sensitive:

| Data | Display | Sensitive? |
|------|---------|------------|
| Token names | Full display | NO -- human-friendly, deliberately shared with invitees |
| Token usage counts | Numeric display | NO -- operational metric |
| Token status (active/revoked/exhausted) | Badge display | NO -- operational state |
| IP hashes | Truncated display (first 8 chars) | NO -- SHA-256 with daily salt, irreversible |
| Transfer IDs | Truncated display (first 8 chars) | NO -- opaque 12-char random string |
| Request counts | Numeric display | NO -- aggregate traffic metric |
| Version strings | Full display | NO -- public information |

**No decryption keys, no file names, no plaintext content appears anywhere in the admin UI.** The zero-knowledge guarantee is preserved by architecture: the server never has this data, so the admin UI cannot display it.

---

## 7. Recommended File Structure

### 7.1 Directory Layout for v0.1.0

```
sgraph_ai_app_send__ui__admin/
  __init__.py                              (existing -- package marker)
  index.html                               (existing -- root redirect placeholder)
  v0/
    v0.1/
      v0.1.0/
        index.html                          (login page -- API key entry, bootstrap)
        console.html                        (full admin console -- loads shell + all components)
        css/
          common.css                        (CSS custom properties, theme variables, reset)
        js/
          admin-api-client.js               (API communication layer)
          event-bus.js                       (CustomEvent dispatcher/listener utility)
        components/
          shell/
            admin-shell.js                  (application shell -- layout, nav, router)
          token-manager/
            admin-token-manager.js          (token CRUD -- list, create, detail, revoke)
          analytics-dashboard/
            admin-analytics-dashboard.js    (pulse display, auto-refresh)
          system-info/
            admin-system-info.js            (version, service status)
          event-browser/
            admin-event-browser.js          (sidebar -- event feed, API log)
```

### 7.2 Loading Order in `console.html`

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGraph Send - Admin Console</title>
    <link rel="stylesheet" href="css/common.css">
</head>
<body>
    <!-- 1. Core services (order matters) -->
    <script src="js/event-bus.js"></script>
    <script src="js/admin-api-client.js"></script>

    <!-- 2. Shell component -->
    <script src="components/shell/admin-shell.js"></script>

    <!-- 3. App components (order does not matter) -->
    <script src="components/token-manager/admin-token-manager.js"></script>
    <script src="components/analytics-dashboard/admin-analytics-dashboard.js"></script>
    <script src="components/system-info/admin-system-info.js"></script>
    <script src="components/event-browser/admin-event-browser.js"></script>

    <!-- 4. Shell element (AFTER all scripts) -->
    <admin-shell></admin-shell>

    <!-- 5. Registration (AFTER shell exists in DOM) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            requestAnimationFrame(() => {
                window.adminApp.router.register(AdminTokenManager);
                window.adminApp.router.register(AdminAnalyticsDashboard);
                window.adminApp.router.register(AdminSystemInfo);
                window.adminApp.router.register(AdminEventBrowser);
            });
        });
    </script>
</body>
</html>
```

### 7.3 IFD Version Path

```
Current:  /admin  -->  redirect to /admin/v0/v0.1/v0.1.0/index.html
                       (defined in admin__config.py)

Future:   v0.1.1 adds surgical overrides to v0.1.0
          v0.1.2 adds more overrides
          v0.2.0 consolidates all proven features
```

The admin config already defines the version path structure:

```python
APP_SEND__UI__ADMIN__MAJOR__VERSION  = "v0/v0.1"
APP_SEND__UI__ADMIN__LATEST__VERSION = "v0.1.0"
APP_SEND__UI__ADMIN__START_PAGE      = "index"
```

---

## 8. Hash Routing

Admin console supports URL hash routing for deep-linking:

```
#/tokens              --> navigate to admin-token-manager (list view)
#/tokens/create       --> navigate to admin-token-manager (create view)
#/tokens/{name}       --> navigate to admin-token-manager (detail view for {name})
#/pulse               --> navigate to admin-analytics-dashboard
#/system              --> navigate to admin-system-info
```

This enables bookmarking specific admin views and sharing admin URLs within the team.

---

## 9. Event Bus Architecture

### 9.1 Event Catalogue

| Event | Emitter | Consumer(s) | Payload |
|-------|---------|-------------|---------|
| `api-authenticated` | `admin-shell` | All components | `{ apiKeyName, apiKeyValue }` |
| `api-error` | `admin-api-client` | `admin-shell`, `admin-event-browser` | `{ status, message, endpoint }` |
| `token-created` | `admin-token-manager` | `admin-event-browser` | `{ token_name, cache_id }` |
| `token-revoked` | `admin-token-manager` | `admin-event-browser` | `{ token_name }` |
| `token-selected` | `admin-token-manager` | `admin-event-browser` | `{ token_name }` |
| `pulse-updated` | `admin-analytics-dashboard` | `admin-event-browser` | `{ active_requests, active_visitors, active_transfers }` |
| `navigated` | `admin-shell` (router) | `admin-event-browser` | `{ appId, previousAppId }` |

### 9.2 Event Bus Implementation

The event bus follows the same pattern as the IFD Issues FS guide -- a simple CustomEvent dispatcher:

```javascript
class EventBus {
    on(event, handler)   { document.addEventListener(event, handler); }
    off(event, handler)  { document.removeEventListener(event, handler); }
    emit(event, detail)  { document.dispatchEvent(new CustomEvent(event, { detail, bubbles: true })); }
}

window.adminApp = window.adminApp || {};
window.adminApp.events = new EventBus();
```

---

## 10. Architectural Decisions

| # | Decision | Rationale |
|---|----------|-----------|
| A1 | Dark theme as default for admin UI | Admin consoles are typically used in low-light conditions. Dark theme reduces eye strain for extended monitoring sessions. Per D021, this is one of five planned themes. |
| A2 | `sessionStorage` for API key (not `localStorage`, not cookie) | Credentials cleared on tab close. Not shared between tabs. Aligns with D025 (no-cookie policy). |
| A3 | Single `admin-api-client.js` for all API calls | Centralised request handling, consistent error management, single place for auth header injection. |
| A4 | Four components + one shell for v0.1.0 | Minimum viable admin console. Maps 1:1 with backend capabilities (tokens, pulse, info). Event browser provides observability. |
| A5 | Login page exempt from API key auth | The login page must load without authentication. All subsequent routes require the key. |
| A6 | No Shadow DOM | Preserves IFD surgical override capability. Allows CSS cascade from theme variables. Components use CSS class prefixes to avoid collisions. |
| A7 | Light DOM with CSS class prefixes | Each component uses a 3-letter prefix (atm-, aad-, asi-, aeb-, ash-) to prevent CSS collisions without Shadow DOM isolation. |

---

## 11. Open Questions

| # | Question | For |
|---|----------|-----|
| AQ1 | Should the admin Lambda exempt the login page route from API key auth, or should the login page be a separate static file served without middleware? | DevOps / Dev |
| AQ2 | Should the pulse auto-refresh interval be configurable (default 10s), or fixed? | Dev |
| AQ3 | Should token usage events be fetchable from the admin UI (new endpoint), or is the event browser limited to client-side API call logging? | Architect / Dev |

---

## 12. Recommendations

| # | Recommendation | Priority | Rationale |
|---|---------------|----------|-----------|
| R1 | Implement `index.html` as a minimal login page that bootstraps the full console | P0 | The admin UI needs authentication before any API calls |
| R2 | Ship v0.1.0 with the four components defined above | P0 | Maps to existing backend endpoints, minimal scope |
| R3 | Use `sessionStorage` for API key storage | P0 | Security boundary -- key does not persist |
| R4 | Add `GET /tokens/lookup/{name}` call with usage event history to token detail view | P1 | Enables admin to see who used a token and when |
| R5 | Implement auto-refresh on analytics dashboard with visual indicator | P1 | Admin needs live monitoring during testing |
| R6 | Follow CSS variable theme pattern from day one | P1 | Enables D021 (five themes) without refactoring |
| R7 | Keep all component files under 300 lines for v0.1.0 | P2 | Maintainability -- if a component exceeds 300 lines, it should be split |

---

## Summary

The admin UI v0.1.0 is a four-component Web Components application following IFD methodology:

1. **`<admin-shell>`** -- layout, navigation, routing, authentication
2. **`<admin-token-manager>`** -- token CRUD (maps to 5 token endpoints)
3. **`<admin-analytics-dashboard>`** -- traffic pulse (maps to pulse endpoint)
4. **`<admin-system-info>`** -- version and service health (maps to info endpoints)
5. **`<admin-event-browser>`** -- sidebar event feed (client-side logging)

All communication via CustomEvents. All styling via CSS custom properties with `--admin-*` namespace. All API calls through a centralised `AdminApiClient`. API key in `sessionStorage`, cleared on tab close.

The architecture is ready for IFD iteration: v0.1.1 can add surgical overrides to any component without copying entire files.

---

*Architect review complete. This document defines the admin UI component architecture for v0.1.0 implementation per the v0.3.0 daily brief.*

# Architect Review: Next Steps from Wardley Maps Briefs

**Version:** v0.3.0
**Date:** 14 February 2026
**Role:** Architect
**Briefs reviewed:**
- `team/humans/dinis_cruz/briefs/02/14/v0.3.2__daily-brief__sgraph-send-14-feb-2026.md`
- `team/humans/dinis_cruz/briefs/02/14/v0.3.2__role-definition__explorer.md`
- `team/humans/dinis_cruz/briefs/02/14/v0.3.2__role-definition__villager.md`
- `team/humans/dinis_cruz/briefs/02/14/v0.3.2__briefs__wardley-maps-in-sgraph-project.md`
- `team/humans/dinis_cruz/claude-code-web/02/14/v0.2.41__brief__decisions-14-feb-2026.md`
- `team/humans/dinis_cruz/claude-code-web/02/14/v0.3.0__daily-brief__sgraph-send-14-feb-2026.md`

---

## Analysis: What the Briefs Tell Us

The v0.3.2 daily brief introduces three major inflection points:

1. **The MVP works end-to-end.** Real users have completed the full flow. This is the trigger for the Explorer/Villager split.
2. **User feedback is in.** Two signals: (a) "Why not WeTransfer?" = positioning gap, and (b) large file transfers = the sweet spot.
3. **External stakeholder arriving.** A design agency is coming on board, requiring a structured brief and new collaboration patterns.

The Wardley Maps documents formalise the team structure that was implicit before. The evolution map is the key architectural artefact — it tells us where to invest effort.

---

## Next Steps: Mapped by Team

### Explorer Team — Immediate (Next 1-2 Sessions)

| # | Action | Owner Roles | Notes |
|---|--------|-------------|-------|
| E1 | **Design agency brief** — comprehensive document covering brand, logo, identity, website mockups, multi-theme/accessibility constraints | Designer, Architect, Advocate, Ambassador | P1. Time-sensitive — external partner waiting. Brief must explain the design system requirement (not a single design). |
| E2 | **Design agency kickoff deck** — visual presentation for someone outside the project | Designer, Advocate, Ambassador | P1. Companion to E1. |
| E3 | **Issues FS adoption** — create `.issues` files for all active workstreams | Conductor, All | P1. Per brief: "every workstream gets a `.issues` file from today." |
| E4 | **Landing page "Why not WeTransfer?"** — address the positioning gap in the first 10 seconds | Designer, Journalist, Advocate, Ambassador | P2. User feedback was clear: differentiation isn't landing. |
| E5 | **Large file transfer architecture** — design chunked uploads, retry logic, checksum verification | Architect | P2. Roadmap item. Architecture should support it from the start even if not built yet. |
| E6 | **External partner Claude bot research** — project-aware Claude session for design agency Q&A | Architect | P2. New collaboration pattern. |
| E7 | **Slack/WhatsApp bot integration research** — current state, maturity, options | Architect | P2. Broader communication channel research. |

### Explorer Team — Medium Term

| # | Action | Owner Roles | Notes |
|---|--------|-------------|-------|
| E8 | **Unencrypted mode evaluation** — should we offer opt-out from encryption for large non-sensitive files? | Advocate, AppSec, Architect | P3. Pluggable, not fundamental. Default always encrypted. |
| E9 | **Read receipts** — surface download/open events to sender | Architect, Sherpa | P3. Data already exists in events. |
| E10 | **Multi-file upload / folder management** — relevant for design agency use case | Architect, Sherpa | P3. Natural extension. |

### Villager Team — Immediate (Next 1-2 Sessions)

| # | Action | Owner Roles | Notes |
|---|--------|-------------|-------|
| V1 | **Explorer handover brief** — document all MVP components ready for productisation | Explorer meta-role, Architect | Prerequisite for everything else. Covers encryption, upload/download, S3, tokens, link sharing. |
| V2 | **Production AWS environment** — separate Lambda functions, S3 buckets, CloudFront from Explorer env | DevOps | Distinct infrastructure is a hard requirement. |
| V3 | **Deployment pipeline** — CI/CD for production releases, separate from Explorer pipeline | DevOps | Must be automated. No manual deployment steps. |
| V4 | **Performance testing** — load test at expected production traffic levels | QA, DevOps | Demo load ≠ production load. |
| V5 | **Security hardening review** — production-grade security configuration | AppSec, CISO | Distinct from code-level security review (which happened during exploration). |
| V6 | **Monitoring and alerting** — full observability for production systems | DevOps | Error rates, latency, uptime, request volume. |
| V7 | **Regression test suite** — ensure all existing behaviour is preserved under production conditions | QA | 111+ tests are the baseline. Add integration and E2E at production scale. |
| V8 | **First IFD release** — consolidate Explorer minor versions into stable major version | Villager meta-role, Dev, DevOps | The primary deliverable. |
| V9 | **Smoke tests post-deployment** — health, auth, CORS, no-plaintext verification | QA | Run after every production deployment. |
| V10 | **Rollback procedure** — verify clean rollback capability for every release | DevOps | Every change must be reversible. |

---

## Architectural Decisions Needed

### AD-1: Environment Separation Strategy

The Wardley Maps briefs require "distinct environments." Options:

- **Option A:** Separate AWS accounts (strongest isolation, most operational overhead)
- **Option B:** Same account, separate resources with naming conventions (e.g., `sgraph-send-prod-*` vs `sgraph-send-dev-*`)
- **Option C:** Same account, separate stacks via CloudFormation/CDK

**Recommendation:** Option B for now. Separate AWS accounts is ideal long-term but adds operational complexity we don't need yet. Same account with naming conventions and separate CI pipelines provides sufficient isolation for the current scale.

**Decision needed from:** Dinis Cruz / DevOps

### AD-2: Handover Brief Format

No standard format exists yet. Propose:

```
team/roles/explorer/handovers/{version}__handover__{component}.md

Sections:
1. Component overview (what it does, user-facing behaviour)
2. Architecture (how it works, dependencies, data flows)
3. Known limitations and edge cases
4. Performance characteristics
5. Test coverage (what's tested, what isn't)
6. Configuration and environment variables
7. Maturity assessment (why it's ready for productisation)
```

**Decision needed from:** Explorer and Villager meta-roles

### AD-3: Branching Strategy for Two Teams

Current: all work on `dev`, feature branches from `dev`. With two teams:

- **Option A:** Explorer stays on `dev`, Villager gets `release/*` branches
- **Option B:** Explorer on `dev`, Villager on `main` (currently unused for active development)
- **Option C:** Separate repos

**Recommendation:** Option A. Explorer continues on `dev`. When Villager productises, they create `release/v{X}.{Y}.0` branches from the handover point. This aligns with IFD — minor versions on dev, major versions on release branches.

**Decision needed from:** Dinis Cruz / DevOps

### AD-4: Large File Transfer Architecture (Roadmap)

Brief calls for chunked/multipart uploads. Key architectural questions:

- **Client-side chunking** — split file before encryption? After encryption? Both have implications for integrity checking.
- **S3 multipart upload** — pre-signed URL per chunk, server-side completion. Works with Memory-FS abstraction?
- **Retry granularity** — per-chunk retry (good) vs full-file retry (current). Per-chunk needs chunk tracking on server.
- **Integrity** — SHA-256 checksum of original file, verified after reassembly + decryption.

This is a design task, not an implementation task. The architecture should be captured now so Explorer can build it when prioritised.

**Decision needed from:** Architect (design), Dinis Cruz (priority)

---

## Evolution Map: Current State

```
GENESIS                    CUSTOM-BUILT                 PRODUCT
|                          |                            |
|  Landing page/UX         |  Browser encryption ------>|
|  Admin interface         |  File upload/download ---->|
|  Observability           |  S3 storage backend ------>|
|  Multilingual            |  Token system ------------>|
|  Theme system            |  Link sharing ------------>|
|  Large file transfer     |                            |
|  Design/brand            |                            |
|  Issues FS integration   |                            |
|  Cache integration       |                            |
|                          |                            |
|<---- Explorer domain --->|<---- Handover zone ------->|<-- Villager domain -->|
```

The five components in the "Handover zone" (encryption, upload/download, S3, tokens, link sharing) are what the Villager team should receive first. Everything else stays with the Explorer team.

---

## Summary

The briefs are clear and well-structured. The Wardley Maps team split is the right move at this maturity point. The session infrastructure (`.claude/explorer/`, `.claude/villager/`) is now in place for team-specific Claude Code sessions.

**Critical path:**
1. Explorer writes handover brief for MVP components → Villager can start
2. Villager sets up production environment → first release possible
3. Explorer starts design agency brief → external partner unblocked

These three workstreams can run in parallel across the two team sessions.

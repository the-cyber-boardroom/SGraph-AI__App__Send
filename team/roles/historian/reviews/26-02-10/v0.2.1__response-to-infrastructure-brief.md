# v0.2.1 — Historian Response to MVP Infrastructure Brief

**Version:** v0.2.1
**Date:** 2026-02-10
**Role:** Historian
**Responding to:** `team/humans/dinis_cruz/briefs/2026-02-10/v0.1.4__briefs__focus-on-mvp-release-infrastructure.md`

---

## 1. Decision Log: Infrastructure Sprint

This document tracks architectural and product decisions made during the MVP infrastructure sprint, beginning with the Conductor's v0.1.4 brief.

### Active Decisions

| # | Date | Decision | Made By | Context | Supersedes |
|---|---|---|---|---|---|
| D001 | 2026-02-10 | Seven deployment targets for MVP: Lambda, Docker, ECS Fargate, EC2, AMI, GCP Cloud Run, local dev | Conductor (brief v0.1.4) | Multi-platform from day one; Conductor has accounts for all | Previous: Lambda-only (v0.1.1 plan) |
| D002 | 2026-02-10 | Admin interface needs same deployment matrix as user-facing | Conductor (brief v0.1.4) | Doubles deployment configs but ensures consistency | New decision |
| D003 | 2026-02-10 | CLI required, wrapping core library (not HTTP) | Conductor (brief v0.1.4) | For testing and power users | New decision |
| D004 | 2026-02-10 | PyPI publish + post-publish smoke test in clean env | Conductor (brief v0.1.4) | Validates package works when installed fresh | Extends existing PyPI publish |
| D005 | 2026-02-10 | Playwright for E2E tests (not Selenium/Cypress) | Conductor (brief v0.1.4) | Browser automation for upload/download cycle | New decision |
| D006 | 2026-02-10 | All backend data classified as non-sensitive/non-confidential | Conductor (brief v0.1.4) | Reaffirms v0.1.0 decision; enables simpler compliance | Reaffirms D-0.1.0-xx |
| D007 | 2026-02-10 | Register Interest moved to external platform | Conductor (brief v0.1.4) | Not our problem to implement | Removes Feature from scope |
| D008 | 2026-02-10 | Feature-8 (CI/CD) owned by Conductor, not Dev team | Conductor (brief v0.1.4) | Conductor will wire up Fast_API class and GitHub Actions | New decision |
| D009 | 2026-02-10 | Storage backend selected via env var `SGRAPH_SEND_STORAGE_BACKEND` | Architect (review v0.2.1) | Proposed by Architect, aligns with Memory-FS design | New decision |
| D010 | 2026-02-10 | Container image shared across Docker, Fargate, GCP Cloud Run | Cartographer/Architect (review v0.2.1) | Reduces 7 targets to 4 unique deployment patterns | Simplification of D001 |
| D011 | 2026-02-10 | Lambda response payload limit is 6MB (not 20MB) | Architect (review v0.2.1) | Corrects risk register entry | Updates risk register |
| D012 | 2026-02-10 | GCP Cloud Run uses AWS S3 backend cross-cloud for MVP | Architect (review v0.2.1) | Native GCS backend deferred to Phase 2 | New decision |
| D013 | 2026-02-10 | Jekyll for Journalist website | Conductor (verbal) | Conductor approved Jekyll as the platform for communications/content site | New decision |

### Decision Patterns Observed

1. **Scope expansion with pragmatic grouping** — While the brief adds 7 deployment targets, the Architect and Cartographer identify that these group into 4 unique patterns, making the expansion more manageable.
2. **Infrastructure-first philosophy** — The Conductor explicitly prioritises deployment infrastructure over business logic. The goal is to build the pipeline that never needs touching again.
3. **Conductor retains CI/CD ownership** — Unlike other features delegated to roles, the CI/CD pipeline (Feature-8) stays with the Conductor, suggesting it's a critical control point.

---

## 2. Spec Changes from Original Brief

| Original Spec (01-project-brief.md) | Current Decision | Changed By | When |
|---|---|---|---|
| Single Lambda function | Two Lambdas (public + admin) | Conductor (v0.1.0 review) | 2026-02-08 |
| API Gateway required | Lambda URL Functions (no API Gateway) | Conductor (v0.1.0 review) | 2026-02-08 |
| Lambda-only deployment | 7 deployment targets | Conductor (v0.1.4 brief) | 2026-02-10 |
| No CLI mentioned | CLI required | Conductor (v0.1.4 brief) | 2026-02-10 |
| Register Interest feature | Removed (external platform) | Conductor (v0.1.0 review) | 2026-02-08 |
| CloudFront from day one | Deferred (Lambda URL Functions serve directly) | Conductor (v0.1.0 review) | 2026-02-08 |

---

## 3. Open Questions (Pending Decisions)

| # | Question | Raised By | Affects |
|---|---|---|---|
| Q001 | Max file size for Lambda proxy mode (6MB limit) | Architect | User experience, error messaging |
| Q002 | When to switch from proxy mode to pre-signed URLs | Architect | Performance, scalability |
| Q003 | Admin auth: single key or per-user (Phase 2) | AppSec | Audit trail capability |
| Q004 | GCS native backend priority | Architect | GCP deployment independence |
| Q005 | CLI encryption library choice (cryptography vs pycryptodome) | Dev | Package dependencies |

---

## 4. Action Items for Historian

- [ ] Maintain this decision log as decisions are made during the sprint
- [ ] Track any spec deviations from the original project brief
- [ ] Record the "why" behind decisions, not just the "what"
- [ ] Flag decisions that contradict earlier ones (with justification)
- [ ] Create a timeline visualisation of key decisions at sprint end

---

*This review is the Historian master file for the v0.1.4 infrastructure brief response.*

# v0.4.25 -- Milestone: First Browser-to-Browser PKI Encrypted Message Exchange

**Version:** v0.4.25
**Date:** 20 February 2026
**Role:** Historian
**Team:** Explorer

---

## Milestone Summary

| Field | Value |
|-------|-------|
| Event | First end-to-end encrypted message exchange between two browser sessions |
| Significance | Proves the zero-knowledge PKI model works in production — client-side only, no server involvement |
| Announced | LinkedIn post by Dinis Cruz |
| LinkedIn URL | https://www.linkedin.com/feed/update/urn:li:ugcPost:7430445854819524608/ |

---

## Timeline

| Time | Event |
|------|-------|
| Session start | PKI page loaded on localhost — hit `crypto.subtle` undefined error (page served via `0.0.0.0`) |
| Fix 1 | Added secure context detection — clear error message with clickable localhost URL |
| Iteration 2 | Compacted layout — two-column grid, tighter spacing, all elements visible at normal zoom |
| Iteration 3 | Added SG/Send brand mark (teal slash `#4ECDC4`), fixed text overflow, added Encrypt/Decrypt message workflow |
| **Milestone** | **First successful encrypted message exchange: "Hello from prod!!!!!!" decrypted on localhost, "Hello from the laptop" decrypted on prod** |
| LinkedIn post | Dinis published milestone announcement with side-by-side screenshots |
| Post-milestone | Added ECDSA P-256 digital signatures for sender authentication (payload v2) |

---

## Technical Record

### Cryptographic Stack at Milestone

| Layer | Algorithm | Purpose |
|-------|-----------|---------|
| Key encapsulation | RSA-OAEP 4096-bit | Wrap/unwrap AES session keys |
| Symmetric encryption | AES-256-GCM | Encrypt message payload |
| Digital signature | ECDSA P-256 | Sender authentication (added post-milestone) |
| Fingerprinting | SHA-256 | Key identification |
| Key storage | IndexedDB | Browser-local, non-extractable private keys |

### What Was Proven

1. **Confidentiality** — Only the holder of the private key can decrypt messages encrypted with the corresponding public key
2. **Zero-knowledge server** — Server serves static HTML/JS only; all crypto operations happen in the browser
3. **Cross-origin operation** — Keys generated on localhost work with keys generated on production (different origins, same algorithms)
4. **Non-extractability** — Private keys cannot be read back from IndexedDB even by the application code

### What Was NOT Proven (Acknowledged in LinkedIn Post)

1. **Sender authentication** — No signature at time of LinkedIn post (added in the same session afterwards)
2. **Key authenticity** — No out-of-band fingerprint verification; users trust the import
3. **Key revocation** — No mechanism to revoke compromised keys
4. **Forward secrecy** — Same RSA key pair used for all messages (no ephemeral key exchange)

---

## Decision Log

| ID | Decision | Rationale |
|----|----------|-----------|
| D-PKI-001 | Use RSA-OAEP 4096 + AES-256-GCM hybrid | Industry standard; RSA encrypts small AES key, AES encrypts arbitrarily large payload |
| D-PKI-002 | Store keys as non-extractable in IndexedDB | Browser-enforced: even JavaScript cannot read private key material back |
| D-PKI-003 | Use ECDSA P-256 for signing (not RSA-PSS) | Instant generation (vs 2-5s for RSA 4096), small signatures (64 bytes), separate key purpose |
| D-PKI-004 | JSON bundle format for public key exchange | Carries both encryption and signing public keys; backwards-compatible with legacy PEM |
| D-PKI-005 | Payload versioning (v1/v2) | v1 = unsigned (backwards compat), v2 = signed; future versions can add fields |
| D-PKI-006 | Announce publicly before authentication was added | Honest about current state; calls out the gap; authentication followed in same session |

---

## Significance in Project History

This milestone marks the transition of SG/Send from a **file transfer tool** to a **cryptographic communication platform**. The file sharing (upload/download with AES-256-GCM) proved the zero-knowledge model for data at rest. PKI messaging proves it for data in transit between parties.

The progression:
1. **v0.1.x** — File encryption in browser, server stores ciphertext (one-way)
2. **v0.2.x** — Admin console, token management, deployment hardening
3. **v0.3.x** — Two-team model (Explorer/Villager), role system, Issues FS
4. **v0.4.x** — **PKI key management, encrypted messaging, digital signatures** (this milestone)

---

## Cross-References

| Document | Location |
|----------|----------|
| Librarian catalogue | [`v0.4.25__catalogue__pki-milestone-and-linkedin-post.md`](../../librarian/reviews/26-02-20/v0.4.25__catalogue__pki-milestone-and-linkedin-post.md) |
| Journalist article | [`v0.4.25__article__pki-milestone.md`](../../journalist/reviews/26-02-20/v0.4.25__article__pki-milestone.md) |
| PKI component | `sgraph_ai_app_send__ui__admin/v0/v0.1/v0.1.2/components/pki-manager/pki-manager.js` |
| LinkedIn post | https://www.linkedin.com/feed/update/urn:li:ugcPost:7430445854819524608/ |

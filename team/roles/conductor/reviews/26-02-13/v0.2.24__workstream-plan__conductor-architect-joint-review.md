# Conductor + Architect Joint Review: Next Workstream Plan

**version** v0.2.24
**date** 13 Feb 2026
**roles** Conductor + Architect (joint)
**inputs** 10 role status reports from `team/roles/*/reviews/26-02-13/v0.2.24__status-report__post-launch.md`

---

## Executive Summary

All 10 roles reported back. No conflicts. Strong alignment on priorities. The consensus is clear: **secure and comply first, then ship sharing UX, then build velocity.**

The friendlies launch happened faster than the master roadmap predicted by taking pragmatic shortcuts. Those shortcuts created explicit debts that must be paid before widening the audience:
- GA deployed without cookie consent or privacy policy
- No rate limiting or CORS restrictions
- Shared access token with no audit trail
- No upload size enforcement

---

## Cross-Role Priority Matrix

| Priority | Theme | Roles Requesting | Verdict |
|----------|-------|-----------------|---------|
| **P0** | Privacy/Compliance (consent + privacy policy) | DPO, Journalist, AppSec, Librarian | **Do immediately** |
| **P0** | Security Hardening (rate limiting, CORS, referrer, auth tests) | AppSec, DevOps, QA | **Do immediately** |
| **P1** | Sharing UX — WS-13 | Architect, Dev | **Highest feature priority** |
| **P1** | Observability — WS-3 | DevOps | **Operational necessity** |
| **P1** | Documentation (system map, master index) | Cartographer, Librarian | **Knowledge base** |
| **P2** | Type_Safe Refactor — WS-15 | Dev | **Enables velocity** |
| **P2** | Text Mode — WS-10 | Dev | **Quick win** |
| **P2** | SPA Routing — WS-14 | Architect | **Needed for clean share URLs** |

---

## The Plan: Three Tiers

### Tier 0: Blocker Clearance (immediate — before wider outreach)

**Privacy/Compliance** — Owner: DPO + Journalist + Dev

| Task | Owner | Effort | Detail |
|------|-------|--------|--------|
| Cookie consent banner | Dev | 1-2 days | Block GA4 scripts until user consents. Use simple vanilla JS banner (IFD pattern). |
| Privacy policy page | Journalist + DPO | 1 day | Disclose: GA4, LaunchList (name + email), IP hashing (SHA-256 daily salt), localStorage access token, zero-knowledge statement. Publish on docs.send.sgraph.ai. |
| Verify GA4 IP anonymisation | DPO + DevOps | 0.5 days | Confirm GA4 default IP truncation. Document. |
| Review LaunchList as data processor | DPO | 0.5 days | LaunchList collects name + email. Assess if DPA needed. |

**Security Hardening** — Owner: AppSec + DevOps + QA + Dev

| Task | Owner | Effort | Detail |
|------|-------|--------|--------|
| Set `Referrer-Policy: no-referrer` | Dev | 0.5 hours | One response header. Prevents hash fragment leakage. **Must ship before WS-13.** |
| Lock CORS to `send.sgraph.ai` | DevOps/Dev | 0.5 hours | FastAPI CORS middleware config. |
| Add upload size enforcement | Dev + QA | 1 day | Reject uploads exceeding file_size_bytes. Add test. Prevents S3 exhaustion. |
| Auth edge case tests | QA | 1 day | Missing token → 401, wrong token → 401, empty token → 401, public endpoints stay 200. |
| Lambda reserved concurrency | DevOps | 0.5 hours | Cap at 10-20 concurrent executions. |
| CloudWatch alarms | DevOps | 1 day | Error count > 0, throttle count > 0, duration > 10s → SNS notification. |

### Tier 1: User-Facing Features (this sprint)

**WS-13: Sharing UX** — Owner: Architect (design) + Dev (implement) + AppSec (review)

| Task | Owner | Effort | Detail |
|------|-------|--------|--------|
| Share URL format spec | Architect | 0.5 days | Proposed: `https://send.sgraph.ai/send/v0/v0.1/v0.1.0/download.html?id={transfer_id}#key={base64_key}`. Hash fragment never sent to server. |
| Implement URL with hash sharing | Dev | 1 day | Generate share URL after complete. Copy button. Download page reads `?id` and `#key` from URL. |
| Email template mode | Dev | 0.5 days | Pre-formatted text with URL, individual components, and explanation. Copy-to-clipboard. |
| AppSec hash fragment review | AppSec | 0.5 days | Verify: redirects, referrer headers, browser extensions, analytics — none leak the fragment. |

**WS-3: Observability Foundation** — Owner: DevOps

| Task | Owner | Effort | Detail |
|------|-------|--------|--------|
| CloudWatch dashboard | DevOps | 1 day | Lambda invocations, errors, duration, S3 operations. |
| X-Ray tracing | DevOps | 0.5 days | Enable on both Lambda functions. |
| Cost monitoring | DevOps | 0.5 days | Budget alert for unexpected spend. |

**Documentation** — Owner: Cartographer + Librarian

| Task | Owner | Effort | Detail |
|------|-------|--------|--------|
| System landscape map v0.2.24 | Cartographer | 1-2 days | Add GA4, LaunchList, docs.send.sgraph.ai, per-route auth, DNS routing. |
| Master index v0.2.24 | Librarian | 1 day | Index all 13 Feb documents. Update Issues FS with completed tasks. |
| Decision log D014-D020 | Historian | 0.5 days | Already captured in status report. Formalise in decision register. |

### Tier 2: Velocity Enablers (next sprint)

| Workstream | Owner | Effort | Notes |
|-----------|-------|--------|-------|
| WS-15: Type_Safe Refactor Phase 1 | Dev | 2-3 days | Fix return types, remove dict-building in routes. Unblocks clean feature work. |
| WS-10: Text Mode | Dev | 1-2 days | Textarea input → same encryption → download renders text. Quick win for friendlies. |
| WS-14: SPA Routing Design | Architect | 1 day | Design spec for catch-all routing, static/app split. Required for clean multi-page UX. |
| FAQ + Getting Started | Journalist | 1 day | Reduce support burden for friendlies. |
| Error path tests | QA | 1 day | Complete on nonexistent, upload to completed, double-complete, malformed JSON. |

---

## Dependency Chain

```
TIER 0 (Parallel — do all at once)
├── Privacy: consent banner + privacy policy + GA verification
├── Security: referrer policy + CORS + upload size + auth tests
└── Operations: reserved concurrency + CloudWatch alarms

        ↓ (all Tier 0 complete)

TIER 1 (Parallel — but WS-13 needs referrer policy from Tier 0)
├── WS-13: Sharing UX (Architect spec → Dev implement → AppSec review)
├── WS-3: Observability foundation (DevOps)
└── Documentation updates (Cartographer + Librarian + Historian)

        ↓ (Tier 1 complete)

TIER 2 (Parallel)
├── WS-15: Type_Safe Refactor
├── WS-10: Text Mode
├── WS-14: SPA Routing Design
└── Content: FAQ + Getting Started
```

---

## Key Decisions Required

| # | Decision | Options | Recommendation |
|---|----------|---------|----------------|
| D021 | Cookie consent implementation | (a) Simple banner with accept/reject, (b) Full consent management platform | **(a)** — vanilla JS banner, block GA until accepted. Keep it simple. |
| D022 | Share URL format | (a) `/d/{id}#key={key}`, (b) `/download.html?id={id}#key={key}` | **(b) for now** — avoids SPA routing dependency. Upgrade to (a) when WS-14 ships. |
| D023 | Rate limiting approach | (a) Lambda-level (reserved concurrency), (b) Application-level (in-memory counter), (c) AWS WAF | **(a) + (b)** — reserved concurrency immediately, application counter in next sprint. WAF is overkill for beta. |
| D024 | Per-user tokens timeline | (a) Before wider launch, (b) After friendlies feedback | **(b)** — shared token is fine for friendlies. Migrate before public launch. |

---

## External Service Inventory

| Service | URL | Purpose | Data Collected |
|---------|-----|---------|---------------|
| **LaunchList** | Admin: `https://getlaunchlist.com/sites/sgraph-send` | Waitlist management | Name, email |
| | Endpoint: `https://getlaunchlist.com/s/zSa8gI` | Form submission | |
| **Google Analytics** | Property: `G-GQTMWE0LHP` | Traffic analytics | Page views, anonymous usage |
| **GitHub Pages** | `https://docs.send.sgraph.ai` | Documentation site | None (static hosting) |
| **AWS Lambda** | `https://send.sgraph.ai` | Application | Encrypted payloads, IP hashes |
| **LinkedIn** | Post: `urn:li:ugcPost:7427917132748910593` | Public announcement | N/A |

---

## Summary

The friendlies launch is done. The system works. Now we harden, comply, and improve the sharing experience. Tier 0 (security + privacy) is non-negotiable before wider outreach. Tier 1 (sharing UX + observability) is the biggest user-facing improvement. Tier 2 (refactoring + text mode) builds velocity for the next phase.

All roles are aligned. No conflicts. Let's execute.

---

*Next Conductor brief will be produced after Tier 0 is complete.*

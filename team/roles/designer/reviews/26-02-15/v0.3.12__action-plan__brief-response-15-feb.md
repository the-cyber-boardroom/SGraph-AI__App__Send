# Designer Action Plan: Brief Response — 15 February 2026

**Version:** v0.3.12
**Date:** 15 February 2026
**Role:** Designer (Explorer Team)
**Brief reviewed:** [v0.3.10 daily brief — Explorer team](../../../../humans/dinis_cruz/briefs/02/15/v0.3.10__daily-brief__explorer-team-15-feb-2026.md)
**Master index:** [v0.3.10 master index](../../../librarian/reviews/26-02-15/v0.3.10__master-index__daily-brief-15-feb.md)
**Previous Designer documents:** [v0.3.2 action plan (14 Feb)](../26-02-14/v0.3.2__action-plan__explorer-next-steps.md), [v0.3.3 agency brief](v0.3.3__brief__cruz-and-cruz-design-agency.md), [v0.3.3 kickoff presentation](v0.3.3__brief__kickoff-presentation-for-cruz-and-cruz.md)

---

## 1. Acknowledged Tasks

The v0.3.10 daily brief assigns the Designer one explicit task:

| Priority | Task | Co-owner | Status | Blocks |
|----------|------|----------|--------|--------|
| **P2** | Token usage UI design (#14) | Dev | **Spec delivered below** | Dev cannot implement without this spec |

The Librarian's master index confirms: "Designer: token usage UI spec (#14) --> Dev: implement token usage display (#14)". This document delivers that spec.

Additionally, the brief contains several UX-adjacent items where the Designer should provide input, even though the brief does not explicitly assign them to the Designer role. These are addressed in Section 4 (UX Considerations).

---

## 2. Design Spec: Token Usage Display

### 2.1 Context

The brief (Section 3) states:

> On the UI, show the user how many tokens have been used and how many remain. We already have this data -- it's in the cache service. Surface it in the UI as:
> - A usage counter (e.g., "3 of 10 uses remaining")
> - A confirmation of the token being used ("Token accepted: community-beta-2025")
>
> This is also the beginning of the payment model visibility -- showing users that usage has a budget.

The backend already returns this data. The `Service__Tokens.use()` method returns `usage_count` and `remaining` fields. The `ApiClient.checkToken()` returns `remaining`. The `ApiClient.validateToken()` returns `usage_count` and `remaining`. The data is available -- the question is purely about presentation.

### 2.2 Data Sources

From the existing API client (`api-client.js`):

| API Call | When Used | Returns |
|----------|-----------|---------|
| `checkToken(tokenName)` | Access gate -- user enters token | `{ valid, status, remaining, reason }` |
| `validateToken(tokenName)` | Download page -- token in URL | `{ success, usage_count, remaining, reason }` |
| `completeTransfer(transferId)` | After upload -- transfer complete | `{ token_name, ... }` |

The `remaining` field is the key data point. When `usage_limit > 0`, the service returns `remaining = max(0, usage_limit - usage_count)`. When `usage_limit` is unlimited (0), the service returns `remaining = -1`.

### 2.3 Token Confirmation Display

**When:** Immediately after successful token validation in the access gate (`send-access-gate.js`), displayed at the top of the upload area.

**Format:**

```
Token accepted: community-beta-2025
3 of 10 uses remaining
```

**Visual spec:**

```
+----------------------------------------------------------+
|  [check icon]  Token accepted: community-beta-2025       |
|                3 of 10 uses remaining                    |
+----------------------------------------------------------+
```

**Element details:**

| Property | Value |
|----------|-------|
| Container | `<div class="token-status">` |
| Background | `var(--color-success)` at 10% opacity (or `var(--color-surface)` with left border accent) |
| Left border | 3px solid `var(--color-success)` |
| Border radius | `var(--radius)` (currently 8px) |
| Padding | `0.75rem 1rem` |
| Margin | `0 0 1rem 0` (below header, above upload zone) |
| Token name line | Font size: `var(--font-size-sm)`. Colour: `var(--color-text)`. Weight: 600. |
| Usage counter line | Font size: `var(--font-size-sm)`. Colour: `var(--color-text-secondary)`. Weight: 400. |
| Check icon | Unicode `\u2713` or SVG checkmark. Colour: `var(--color-success)`. Displayed inline before "Token accepted". |

**Counter format variations:**

| Scenario | Display Text | Notes |
|----------|-------------|-------|
| Normal usage | "3 of 10 uses remaining" | Standard counter |
| Low usage (<=3 remaining) | "2 of 10 uses remaining" | Change counter colour to `var(--color-warning)` |
| Critical (1 remaining) | "1 of 10 uses remaining -- last use" | Change counter colour to `var(--color-error)`, add emphasis |
| Exhausted (0 remaining) | "This token has been fully used" | Show as `status--error`. Redirect to gate after brief display. |
| Unlimited | "Token accepted: community-beta-2025" | No counter shown. The `remaining = -1` case. |

**i18n keys to add:**

```json
{
  "token.status.accepted": "Token accepted: {name}",
  "token.status.remaining": "{remaining} of {limit} uses remaining",
  "token.status.remaining_low": "{remaining} of {limit} uses remaining",
  "token.status.remaining_last": "1 of {limit} uses remaining -- last use",
  "token.status.exhausted": "This token has been fully used",
  "token.status.unlimited": "Token accepted: {name}"
}
```

### 2.4 Placement in the Upload Flow

The token usage display appears in **three locations** across two pages:

#### Location 1: Post-Gate Confirmation (Upload Page)

**Position:** Between the page header and the `<send-upload>` component. Inside `<send-access-gate>`, rendered immediately after `showContent()` is called.

**Lifecycle:**
1. User enters token in the access gate
2. `checkToken()` returns `{ valid: true, remaining: 7 }` (for example)
3. Gate transitions to content view
4. Token status bar appears above the upload component
5. Persists throughout the upload session (does not disappear on file selection or upload)
6. Updates `remaining` count after each successful upload (decrement locally; re-fetch on next page load)

**Implementation approach:** The `send-access-gate` component should inject a `<div class="token-status">` element before the slotted content when transitioning to `showContent()`. The token data from `checkToken()` should be passed through.

```
+--------------------------------------------------+
| SGraph Send                                      |
| Zero-knowledge encrypted file sharing            |
+--------------------------------------------------+

+--------------------------------------------------+
| [check] Token accepted: community-beta-2025      |
|         7 of 10 uses remaining                   |
+--------------------------------------------------+

+--------------------------------------------------+
| [File] [Text]                                    |
|                                                  |
|   Drag and drop your file here                   |
|   or click to select                             |
|                                                  |
+--------------------------------------------------+
```

#### Location 2: Upload Complete (Result Panel)

**Position:** Within the `renderResult()` method of `send-upload.js`, below the success status and above the share link.

**When:** After `completeTransfer()` returns. The response already includes `token_name`. The `remaining` count should be fetched from the `checkToken()` response (or cached from Location 1 and decremented).

**Format:** Compact, secondary to the share link. This reinforces awareness without dominating the result view.

```
+--------------------------------------------------+
| [success] File encrypted and uploaded!            |
+--------------------------------------------------+
| Token: community-beta-2025 (6 uses remaining)    |
+--------------------------------------------------+
| Share link:                                       |
| https://send.sgraph.ai/send/v0/...  [Copy] [Open]|
+--------------------------------------------------+
```

**Visual:** Single line. Font size `var(--font-size-sm)`. Colour `var(--color-text-secondary)`. No border, no background -- integrated into the result flow. The "6 uses remaining" portion is parenthetical.

#### Location 3: Download Page (Token Context)

**Position:** This is a lighter touch. On the download page, if a token name is present in the URL (`?token=community-beta-2025`), show a small informational badge.

**Format:**

```
+--------------------------------------------------+
| Shared via: community-beta-2025                   |
+--------------------------------------------------+
```

**Visual:** Font size `var(--font-size-sm)`. Colour `var(--color-text-secondary)`. No usage counter on the download page -- the receiver does not need to know the sender's usage limits. This is purely informational, showing which token context created this transfer.

**Note:** The download page already validates the token via `validateToken()`. If the token is invalid/exhausted, the existing error handling (via `getTokenErrorMessage()`) already covers this. No additional design is needed for the error case on the download page.

### 2.5 Payment Model Visibility

The brief explicitly calls this "the beginning of the payment model visibility." The design should establish a visual pattern that can evolve into a billing context:

**Current state (beta):** "X of Y uses remaining" -- a simple counter.

**Future state (paid):** The same counter evolves into "X of Y transfers this month" or "X transfers remaining on your plan." The visual container, position, and interaction pattern should be consistent from beta to paid.

**Design principle:** The token status bar is a **resource meter**. It shows a finite resource being consumed. The visual language should subtly reinforce that usage has value -- not through scarcity pressure, but through transparent accounting. This aligns with the brand value of "cost transparent."

**Visual evolution path:**

| Phase | Display | Container |
|-------|---------|-----------|
| Beta (now) | "7 of 10 uses remaining" | Green-accented status bar |
| Early paid | "7 of 10 transfers this month" | Same container, different label |
| Full billing | "7 transfers remaining | Upgrade plan" | Same container + CTA link |

The container design should accommodate a future "Upgrade" or "Get more" link without requiring layout changes. Reserve space for it conceptually but do not implement it now.

### 2.6 Interaction Behaviour

| Event | Behaviour |
|-------|-----------|
| **Token accepted** | Status bar appears with slide-down animation (200ms, ease-out). Respects `prefers-reduced-motion`. |
| **Upload completes** | `remaining` decrements by 1 in the status bar (no re-render, just text update). If the new value crosses a threshold (<=3, ==1), update the colour. |
| **Token exhausted mid-session** | After final upload, show "This token has been fully used" in `status--error` style. After 3 seconds, transition back to the access gate. |
| **Page reload** | Re-fetch token status via `checkToken()`. Display current values. |
| **Token invalid (401 during upload)** | Existing behaviour: `access-token-invalid` event fires, gate re-appears. No change needed. |
| **Clicking the token status bar** | No action. This is informational only. (Future: could link to a usage details view.) |

### 2.7 Component Structure

The token status display should be implemented as a lightweight render function, not a full Web Component. It does not need Shadow DOM, lifecycle hooks, or event emission. It is a simple DOM element managed by the access gate.

**Proposed implementation pattern:**

```javascript
// In send-access-gate.js, after showContent()
renderTokenStatus(tokenData) {
    const { token_name, remaining, usage_limit } = tokenData;
    if (remaining === -1) {
        // Unlimited token -- show confirmation only
        return `<div class="token-status">...</div>`;
    }
    // Finite token -- show counter
    return `<div class="token-status">...</div>`;
}
```

**CSS class additions:**

```css
.token-status {
    background: var(--color-surface);
    border-left: 3px solid var(--color-success);
    border-radius: var(--radius);
    padding: 0.75rem 1rem;
    margin-bottom: 1rem;
    font-size: var(--font-size-sm);
}

.token-status__name {
    font-weight: 600;
    color: var(--color-text);
}

.token-status__counter {
    color: var(--color-text-secondary);
    margin-top: 0.25rem;
}

.token-status__counter--warning {
    color: var(--color-warning);
}

.token-status__counter--critical {
    color: var(--color-error);
    font-weight: 600;
}
```

### 2.8 Accessibility

| Requirement | Implementation |
|-------------|----------------|
| Screen reader | `role="status"` on the container. `aria-live="polite"` so changes are announced. |
| Colour independence | The warning/critical states use both colour AND text changes ("last use" suffix). Never colour-only. |
| High contrast theme | The left border accent must meet 3:1 contrast against the container background in all themes. |
| Keyboard | No keyboard interaction needed (informational element). Tab order should skip this element. |
| Text scaling | Container must accommodate 200% text zoom without overflow or clipping. |

---

## 3. Carryover: Design Agency Brief Status

### 3.1 Delivered

The following design agency deliverables were completed on 15 Feb and exist in the repo:

| Document | Status | Notes |
|----------|--------|-------|
| [Cruz & Cruz design agency brief](v0.3.3__brief__cruz-and-cruz-design-agency.md) | **Complete** | Comprehensive 12-section brief covering logo, brand identity, mockups, themes, accessibility, multilingual, personas, competitive positioning. |
| [Kickoff presentation outline](v0.3.3__brief__kickoff-presentation-for-cruz-and-cruz.md) | **Complete** | 22-slide deck structure covering problem, product, personas, deliverables, logistics. |

### 3.2 Ongoing / Not Yet Started

| Item | Status | Next Step |
|------|--------|-----------|
| **Kickoff meeting with Cruz & Cruz** | Not scheduled | Human (project lead) to schedule. Brief and presentation are ready. |
| **Visual assets for kickoff deck** | Not started | Screenshots of current UI, architecture diagram, competitor logos, theme mood boards. Depends on Dev (screenshots) and Architect (diagram). |
| **Theme rough mockups** | Not started | CSS custom property variations for Aurora/Glacier/Ember. Can be produced by varying `common.css` variables. Low priority -- the agency will produce proper themes. |
| **Landing page "Why not WeTransfer?" concept** | Not started | P2 from 14 Feb brief. Still relevant. The agency brief (Section 5.3, Screen 1) asks Cruz & Cruz to produce this. Internal rough concept deferred pending agency output. |

### 3.3 Decision: No Action on Agency Items This Session

The agency brief and kickoff presentation are complete and waiting for human scheduling. The Designer's attention should focus on the token usage spec (this document) and UX guidance for the Dev-owned items in today's brief. The agency track is not blocked on the Designer.

---

## 4. UX Considerations for New Brief Items

The v0.3.10 brief contains several items with UX implications. While the brief assigns these to Dev, the Designer should provide design guidance to ensure visual consistency and good user experience.

### 4.1 Download Page Loading Experience (Brief Section 4, P1)

**Problem:** When a user opens the download page, JavaScript loading causes a delay. During this delay, the "Join the Early Access programme" form is visible first, which is confusing. The user came to download, not to sign up.

**Designer recommendation:**

The loading state should be the **first thing rendered**, before any JavaScript loads. This means it must be in the static HTML, not generated by a Web Component.

**Proposed loading state:**

```html
<!-- In download.html, inside <main>, before any component tags -->
<div id="download-loading" class="card" style="text-align: center; padding: 2rem;">
    <div class="loading-spinner"></div>
    <p style="margin-top: 1rem; color: var(--color-text-secondary);">
        Preparing your download...
    </p>
</div>
```

The `<send-download>` component should remove `#download-loading` when it renders. This ensures the user sees "Preparing your download..." immediately, even before JavaScript has loaded and executed.

**Loading spinner CSS** (add to `common.css`):

```css
.loading-spinner {
    width: 2rem;
    height: 2rem;
    border: 3px solid var(--color-border);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 0 auto;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

@media (prefers-reduced-motion: reduce) {
    .loading-spinner {
        animation: none;
        border-top-color: var(--color-primary);
        opacity: 0.6;
    }
}
```

**i18n consideration:** The loading message is in static HTML, not in a locale file. For the initial implementation, hardcode in English. Once the i18n system loads, it can update the text via `data-i18n`. This is an acceptable trade-off: the loading state is brief (sub-second in most cases), and English is the primary locale.

### 4.2 Token Expiry Error Messages (Brief Section 2, P1)

**Problem:** When a token is invalid, expired, or exhausted, the user is silently redirected to the first page with no message.

**Designer recommendation:**

The access gate already has partial handling for this (the `submitToken()` method shows error text for `not_found`, `exhausted`, and `revoked`). The issue is that when a *previously-stored* token becomes invalid (e.g., between sessions), the `showContent()` path does not check validity -- it just reveals the upload component, which then fails on first API call with a raw error.

**Proposed error messages (for each state):**

| Token State | Message | Guidance | Style |
|-------------|---------|----------|-------|
| `not_found` | "This token was not found" | "Please check the token and try again, or request a new one." | `status--error` |
| `exhausted` | "This token has reached its usage limit" | "All {limit} uses have been consumed. Request a new token to continue." | `status--warning` |
| `revoked` | "This token has been revoked" | "This token is no longer active. Please contact the person who shared it." | `status--error` |
| `expired` | "This token has expired" | "Please request a new token to continue sending files." | `status--warning` |
| Network error | "Could not verify your token" | "Please check your connection and try again." | `status--error` |

**Visual layout for error state:**

```
+--------------------------------------------------+
| [warning icon]  This token has reached its limit  |
|                                                   |
| All 10 uses have been consumed.                   |
| Request a new token to continue.                  |
|                                                   |
| [Enter a different token]                         |
+--------------------------------------------------+
```

The "Enter a different token" link should clear the stored token and re-show the token input gate.

### 4.3 Token-Aware Page State (Brief Section 5, P1)

**Problem:** The download page shows "Want to send files too? Join the Early Access programme" even when the user already has a valid token in localStorage.

**Designer recommendation:**

Two distinct states for the post-download CTA:

**State A: User has a valid token in localStorage**

```
+--------------------------------------------------+
|  Want to send files too?                          |
|  [Send a file ->]                                 |
+--------------------------------------------------+
```

- "Send a file" links to the upload page (`/send/v0/v0.1/v0.1.4/index.html`)
- No sign-up form
- Clean, minimal, single CTA
- Font size: `var(--font-size-sm)`. Text colour: `var(--color-text-secondary)`. Link colour: `var(--color-primary)`.

**State B: User does NOT have a token in localStorage**

```
+--------------------------------------------------+
|  Want to send files too?                          |
|  Join the Early Access programme                  |
|                                                   |
|  [Name] [Email] [Sign Up]                         |
+--------------------------------------------------+
```

- Current behaviour (LaunchList form)
- This is the acquisition funnel for the download page

**Detection logic:** `ApiClient.hasAccessToken()` returns `true/false`. This is already available in the codebase. The download component should call this once on render and conditionally display State A or State B.

**Placement:** Below the download result (after the transparency panel), matching the current position of the sign-up CTA. This is secondary content -- the download experience is always primary.

### 4.4 Upload Progress Granularity (Brief Section 10, P1)

**Problem:** The progress bar currently has only two positions: 33% (encrypting) and 66% (uploading). The user sees it stall and thinks something is broken.

**Designer recommendation for progress stages:**

| Stage | Progress % | Label | Visual |
|-------|-----------|-------|--------|
| File selected | 0% | "Ready to encrypt" | No progress bar yet |
| Encryption starting | 5% | "Encrypting in your browser..." | Bar appears, animated |
| Encryption in progress | 5-40% | "Encrypting... {pct}%" | Smooth fill, updated per chunk if possible |
| Encryption complete | 40% | "Encryption complete" | Brief hold (300ms) |
| Upload starting | 45% | "Uploading encrypted file..." | Bar continues |
| Upload in progress | 45-90% | "Uploading... {pct}%" | Smooth fill, XHR progress events |
| Upload complete | 90% | "Upload complete" | Brief hold (300ms) |
| Server processing | 93% | "Processing..." | Indeterminate pulse on the remaining 7% |
| Link generation | 97% | "Generating share link..." | Almost full |
| Done | 100% | "Done!" | Bar completes, transitions to result view |

**Visual improvements:**

1. **Show percentage text** above or below the progress bar: "Encrypting... 67%"
2. **Stage label** below the bar in `var(--font-size-sm)`, colour `var(--color-text-secondary)`
3. **Estimated time** (future, not for this iteration): "About 12 seconds remaining"
4. **Smooth transitions:** Use CSS `transition: width 200ms ease` on `.progress-bar__fill` for smooth bar movement rather than jumpy snaps

**Indeterminate state:** When the client is waiting for a server response (server processing, link generation), the progress bar should use a pulsing/shimmer animation on the unfilled portion to indicate "still working." This communicates activity even when the client has no progress data.

```css
.progress-bar__fill--indeterminate {
    animation: progress-pulse 1.5s ease-in-out infinite;
}

@keyframes progress-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}
```

### 4.5 Navigation Guard During Upload/Download (Brief Section 12, P1)

**Designer recommendation:**

The `beforeunload` event shows a browser-native confirmation dialog. This requires no design work -- it is the correct UX pattern and is handled entirely by the browser.

For on-page links during active transfer, the Designer recommends:

1. **Visual de-emphasis:** During upload/download, reduce opacity of non-essential links to 0.5 and change cursor to `not-allowed`.
2. **Interception modal:** If a user clicks a link during transfer, show a simple confirmation:

```
+------------------------------------------+
|  Upload in progress                      |
|                                          |
|  Leaving this page will cancel your      |
|  upload. The file will not be sent.      |
|                                          |
|  [Stay on page]  [Leave anyway]          |
+------------------------------------------+
```

- "Stay on page" is the primary action (styled as `btn-primary`)
- "Leave anyway" is secondary (styled as `btn`, no primary treatment)
- Modal uses existing card styling with a semi-transparent overlay

---

## 5. Recommendations

### 5.1 Immediate (Unblock Dev)

1. **This document unblocks Dev on task #14** (token usage display). The spec in Section 2 is implementation-ready. Dev should implement in the next IFD version (v0.1.5) of the user UI.

2. **Dev should implement the loading state** (Section 4.1) as static HTML in `download.html`. This is a one-line HTML addition plus a CSS class. No Designer review needed -- ship it.

3. **Token expiry messages** (Section 4.2): Dev should add the error messages to the access gate. The i18n keys should follow the patterns already established in the locale files.

### 5.2 Design Consistency

4. **All new UI elements should use existing CSS custom properties.** No new colours, no hardcoded hex values. The token status bar, loading spinner, and progress improvements must all work across all future themes (Aurora, Glacier, Ember, Dark, High Contrast) without modification.

5. **The token status bar** (Section 2) establishes a new visual pattern: the **left-border-accented info bar**. This pattern should be documented and reusable. It will appear again for billing visibility, plan status, and usage summaries.

### 5.3 Future Considerations

6. **Three-word key UX** (Brief Section 1, P3): If AppSec approves the concept, the Designer will need to produce a spec for the three-word input experience. This would be a significant new interaction pattern -- a word picker or word input with dictionary validation, visual feedback per word, and a combined "passphrase" display. Do not design this until the security review is complete.

7. **SA Dashboard design:** The brief introduces a significant new page (Server Analytics dashboard). When the Architect produces the routing and component design, the Designer should review the proposed UI structure for visual consistency with the existing admin UI. The cache browser, Lambda view, and CloudFront viewer will all need consistent layout patterns.

8. **Admin UI navigation** (Brief Section 6): Adding Swagger, main site, and docs links to the admin UI is straightforward. Recommend placing them in the `<admin-shell>` navigation header as secondary links (right-aligned, `var(--font-size-sm)`, `var(--color-text-secondary)`).

### 5.4 Agency Track

9. **No Designer action needed on the agency track this session.** The brief and kickoff presentation are complete. The ball is with the human (scheduling) and the agency (reviewing the brief). When the agency responds with initial concepts, the Designer role will be re-activated for review coordination.

---

## Summary

| Item | Status | Output |
|------|--------|--------|
| Token usage UI design spec (P2, #14) | **Delivered** | Section 2 of this document |
| Loading state guidance (P1, #4 context) | **Delivered** | Section 4.1 |
| Token expiry message guidance (P1, #2 context) | **Delivered** | Section 4.2 |
| Token-aware page state guidance (P1, #3 context) | **Delivered** | Section 4.3 |
| Upload progress guidance (P1, #5 context) | **Delivered** | Section 4.4 |
| Navigation guard guidance (P1, #12 context) | **Delivered** | Section 4.5 |
| Agency brief carryover | **Documented** | Section 3 |
| Recommendations | **Provided** | Section 5 |

**Critical path:** Dev is unblocked on task #14 (token usage display). The spec includes counter format, confirmation format, placement in all three locations (post-gate, upload result, download page), payment model visibility evolution, interaction behaviour, component structure, CSS additions, i18n keys, and accessibility requirements.

---

*This document responds to the v0.3.10 daily brief from the Designer role. The primary deliverable is the token usage display spec (Section 2), which unblocks the Dev role on task #14. UX guidance for five additional brief items is provided to ensure visual consistency across the P1 bug fixes. The agency track (Cruz & Cruz) is complete and awaiting human scheduling.*

# v0.1.2 â€” Frontend Implementation Plan (IFD + Web Components)

**version** v0.1.2  
**date** 9 Feb 2026  
**role** Dev

## 1. Scope

Frontend plan aligned with:

- IFD methodology
- Web Components only (no frontend framework)
- SPA client-side routing (no hash routing)
- separate user and admin websites
- support for themes, i18n, and accessibility from start

## 2. Site topology

1. User site (main workflow):
   - send/retrieve encrypted files
   - optimized for minimal code and fast load
2. User tools site (power-user mode):
   - encryption/decryption playground
   - storage inspector
   - API explorer
3. Admin site:
   - token management
   - usage and observability views

## 3. Routing model

1. SPA routes are handled by client router.
2. Server returns `index.html` for matched app routes.
3. No hash routes (`/#/...`) are used.
4. Deep linking must work for:
   - `/d/{transfer_id}`
   - `/s/{transfer_id}`
   - `/tools/*`
   - admin routes (on admin site domain/path)

## 4. Proposed frontend structure

```text
frontend/
  user/
    index.html
    app/
      shell/
        app-shell.js
        app-router.js
      pages/
        page-upload.js
        page-download.js
        page-status.js
      components/
        c-token-input.js
        c-file-dropzone.js
        c-progress-panel.js
        c-transparency-panel.js
        c-share-actions.js
      services/
        api-client.js
        crypto-service.js
        upload-service.js
        download-service.js
        storage-inspector-service.js
      themes/
        theme-default.css
        theme-compact.css
      i18n/
        en-gb.json
        pt-pt.json
      accessibility/
        a11y-default.css
        a11y-high-contrast.css
  tools/
    index.html
    app/
      pages/
        page-crypto-lab.js
        page-storage-inspector.js
        page-api-explorer.js
  admin/
    index.html
    app/
      pages/
        page-admin-tokens.js
        page-admin-stats.js
        page-admin-audit.js
  page-designs/
    upload/
      v0.1.2__page-spec.md
    download/
      v0.1.2__page-spec.md
    status/
      v0.1.2__page-spec.md
    tools-api-explorer/
      v0.1.2__page-spec.md
```

## 5. Crypto and transfer flows

### 5.1 Encryption/decryption

1. Use Web Crypto API AES-256-GCM.
2. 12-byte random IV per encryption operation.
3. Payload format:
   - first 12 bytes IV
   - remaining bytes ciphertext + tag
4. Key never sent to backend.
5. Add crypto-lab UI for user verification and education.

### 5.2 Upload modes

1. Presign mode:
   - ask backend for upload URL
   - upload encrypted payload directly.
2. API payload mode:
   - send encrypted bytes to backend API when storage backend requires it.

### 5.3 Download modes

1. Presign mode:
   - obtain download URL from backend
   - fetch encrypted bytes directly.
2. API payload mode:
   - retrieve encrypted bytes from backend endpoint.

## 6. Required UX capabilities

1. Main flow pages must remain simple and fast.
2. Show guidance to share link and key separately.
3. Add Gmail compose-url helper for email sharing.
4. Add localStorage/cookie inspection UI.
5. Add API explorer UI for key backend operations.
6. Add theme selector, language selector, and accessibility mode selector.

## 7. IFD page-design artifacts

For each key page, maintain a page folder with at least:

1. page purpose and user stories
2. component list and dependencies
3. input/output data model
4. event map
5. UX states and error states
6. test scenarios

This keeps implementation unambiguous and reusable.

## 8. Frontend test strategy

1. Unit tests for Web Components and client services.
2. Integration tests with in-memory backend (no mocks).
3. E2E tests for:
   - upload
   - share
   - download
   - decrypt
   - status tracking
4. Theme/i18n/accessibility smoke tests from day one.

## 9. Delivery estimate

| Component | Estimate |
|---|---:|
| SPA shell + route handling (user/tools/admin) | 1.5 days |
| Main workflow pages + crypto service | 1.5 days |
| Tools pages (crypto-lab, storage inspector, api explorer) | 1.0 day |
| Theme/i18n/a11y baseline | 1.0 day |
| Tests and mobile validation | 1.0 day |
| **Total** | **6.0 days** |


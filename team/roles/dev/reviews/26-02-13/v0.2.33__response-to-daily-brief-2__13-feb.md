# v0.2.33 -- Dev Response to Daily Brief #2 (13 Feb 2026)

**Version:** v0.2.33
**Date:** 2026-02-13
**Role:** Dev
**Context:** Response to `team/humans/dinis_cruz/briefs/02/13/v0.2.32__daily-brief__2__sgraph-send-13-feb-2026.md`
**Precedes:** Integrates and supersedes task list from `team/roles/dev/reviews/26-02-13/v0.2.24__response-to-daily-brief__13-feb.md` (Brief #1 response)

---

## Executive Summary

Brief #2 introduces the **cache service** as the central data backbone, replacing the earlier "collect to S3" model with a Memory-FS-based cache layer that supports temporal storage, LETS aggregation, and cache-hash resolution. This changes the architecture for analytics, tokens, and cost tracking. Google Analytics is being removed.

**Key constraint:** The Architect must design the cache service schema (analytics entries, token entries, cost entries, temporal granularity, LETS pipeline triggers) BEFORE Dev can implement any of the cache-dependent items. This is the single gating dependency for Brief #2 work.

**From Brief #1:** Hash-fragment URLs (APPROVED), text input, and i18n foundation remain the highest-impact items that can start immediately with no blocking dependencies.

---

## 1. Consolidated Task List (Brief #1 + Brief #2)

### P1 -- Critical Path

| ID | Task | Source | Est. Hours | Dependencies | Status |
|----|------|--------|-----------|--------------|--------|
| D-01 | Hash-fragment URLs | Brief #1 | 2-3h | None (Architect + AppSec APPROVED) | **Ready** |
| D-02 | Text input mode | Brief #1 | 4-6h | None | Ready |
| D-03 | i18n foundation | Brief #1 | 6-8h | None | Ready |
| D-04 | Cache service integration -- analytics collection + LETS pipeline | Brief #2 | 12-16h | **Architect schema design** | Blocked |
| D-05 | Remove Google Analytics | Brief #2 | 1-2h | D-04 partially complete (basic pulse working) | Blocked |
| D-06 | IFD compliance on all UI work | Brief #2 | Ongoing | None (methodology, not a task) | Active |

### P2 -- High Value

| ID | Task | Source | Est. Hours | Dependencies | Status |
|----|------|--------|-----------|--------------|--------|
| D-07 | Human-friendly token system (cache-hash resolution + usage limits) | Brief #2 | 10-14h | **Architect schema design** | Blocked |
| D-08 | Local storage transparency panel | Brief #2 | 6-8h | D-03 (i18n -- all strings through translation) | Ready after D-03 |
| D-09 | Modular admin UI (event-driven architecture) | Brief #2 | 10-14h | IFD versioning plan, shared code review | Ready |
| D-10 | Admin token creation/visualisation/sharing UI | Brief #1 | 8-12h | Absorbed into D-07 (token system now cache-hash-based) | Merged |
| D-11 | Landing page content (with i18n) | Brief #1 | 3-4h | D-03 (i18n), Journalist copy | Ready after D-03 |
| D-12 | Email sharing (copy-text + Gmail) | Brief #1 | 2-3h | D-01 (hash-fragment URLs) | Ready after D-01 |
| D-13 | Event data UI | Brief #1 | 2-3h | D-04 (cache service -- events now cache-stored) | Blocked |
| D-14 | Theme system (5 themes, CSS variables) | Brief #1 | 6-8h | D-03 (i18n -- theme names through translation) | Ready after D-03 |
| D-15 | Drag-and-drop fix | Brief #1 | 1-2h | None | Ready |
| D-16 | AWS cost collection into cache service | Brief #2 | 4-6h | **Architect schema**, D-04 (LETS pipeline), DevOps | Blocked |

### P3 -- Future

| ID | Task | Source | Est. Hours | Dependencies | Status |
|----|------|--------|-----------|--------------|--------|
| D-17 | Zero-local-storage mode | Brief #2 | 4-6h | D-08 (transparency panel -- shows what to clear) | Blocked |

### Ongoing -- Code Quality (from Status Report)

| ID | Task | Source | Est. Hours | Dependencies | Status |
|----|------|--------|-----------|--------------|--------|
| D-18 | Type_Safe refactor (50+ todos in Transfer__Service) | Status report | 12-16h | None (can interleave) | Ready |

**Total estimated effort:** ~95-130 hours across all items.

---

## 2. Size Estimates for New Items (Brief #2)

| Task | Estimate | Reasoning |
|------|----------|-----------|
| **Cache service integration (D-04)** | 12-16h | New service layer (`Analytics__Service`), LETS pipeline classes, temporal file writing, aggregation logic (30min -> hourly -> daily -> monthly), raw event file writer for every request, query-and-save pattern. We already use `Storage_FS` extensively so the storage primitives are familiar, but the aggregation cascade is new logic. |
| **Remove Google Analytics (D-05)** | 1-2h | Remove GA script tags from HTML, remove LaunchList GA tracking code from `send-upload.js` and page templates. Small and surgical once the replacement has basic pulse. |
| **Human-friendly token system (D-07)** | 10-14h | Replaces the Brief #1 token system (D-10). Now requires: cache-hash generation from token string, cache-ID resolution, usage counting against limits, usage event recording in cache entry, admin UI for CRUD. Backend is larger than Brief #1 because of the cache-hash resolution layer. Frontend is similar scope. |
| **Local storage transparency panel (D-08)** | 6-8h | New Web Component (`send-storage-panel`). Must enumerate `localStorage` keys, display formatted data, provide per-key clear and clear-all actions, show opt-in toggle for key caching. IFD-compliant as v0.1.1 minor version. |
| **Modular admin UI (D-09)** | 10-14h | Event-driven module loader, dynamic component registration, base admin shell, at least 3 modules (dashboard, tokens, analytics). Currently admin UI at `sgraph_ai_app_send__ui__admin/v0/v0.1/v0.1.0/` is a placeholder. This is a full build from the event-driven shared code. |
| **AWS cost collection (D-16)** | 4-6h | Collector class following the same LETS pattern as analytics. Requires `osbot-aws` cost explorer API (no direct boto3). Store daily cost snapshots in cache service with temporal paths. Joint work with DevOps. |
| **Zero-local-storage mode (D-17)** | 4-6h | Add `data-storage-mode="none"` attribute, bypass all `localStorage` writes, session-only state management. Extension of the transparency panel. |

---

## 3. Recommended Implementation Sequence

### Phase 1: Immediate (no blockers) -- Days 1-3

```
D-01  Hash-fragment URLs        [2-3h]   -- Highest UX impact, APPROVED, unblocks D-12
D-02  Text input mode           [4-6h]   -- P1, no dependencies, unblocks friendlies testing
D-15  Drag-and-drop fix         [1-2h]   -- Quick win, slot between larger tasks
D-12  Email sharing             [2-3h]   -- Depends on D-01 completing
```

**Rationale:** These four items are all frontend-dominant, have zero external dependencies, and deliver maximum user-facing impact for the friendlies launch. D-01 is the single most impactful change.

### Phase 2: Foundation (no blockers) -- Days 3-5

```
D-03  i18n foundation           [6-8h]   -- Architectural foundation, blocks all new content
D-06  IFD compliance            [ongoing] -- Applied to everything from here forward
```

**Rationale:** The i18n system MUST land before any new UI content (landing page, admin UI, transparency panel, theme names). This is an architectural constraint from both Architect and Conductor. Every string from this point forward goes through `t('key')`.

### Phase 3: Admin foundation + GA removal -- Days 5-9

```
D-09  Modular admin UI          [10-14h] -- IFD-compliant, event-driven, shared code
D-04  Cache service integration [12-16h] -- BLOCKED until Architect schema delivered
D-05  Remove GA                 [1-2h]   -- Immediately after D-04 provides basic pulse
```

**Rationale:** D-09 (admin UI) can proceed without the cache service schema because it is structural UI work (shell, module loader, event bus). D-04 starts as soon as the Architect delivers the schema. GA removal (D-05) happens the moment D-04 can answer "is anyone on the site right now?" and "how many today?"

### Phase 4: Token system + UI features -- Days 9-13

```
D-07  Token system              [10-14h] -- BLOCKED until Architect schema delivered
D-08  Transparency panel        [6-8h]   -- After D-03 (i18n)
D-11  Landing page content      [3-4h]   -- After D-03 (i18n), needs Journalist copy
D-13  Event data UI             [2-3h]   -- After D-04 (cache service)
```

### Phase 5: Polish + cost tracking -- Days 13-16

```
D-14  Theme system              [6-8h]   -- After D-03 (i18n)
D-16  AWS cost collection       [4-6h]   -- After D-04 (LETS pipeline), with DevOps
D-17  Zero-local-storage mode   [4-6h]   -- After D-08 (transparency panel)
```

### Phase 6: Code quality (interleaved throughout)

```
D-18  Type_Safe refactor        [12-16h] -- Can be done in parallel during blocked periods
```

**Rationale:** The Type_Safe refactor (50+ todos in `Transfer__Service.py`, `Routes__Transfers.py`, `Send__Config.py`) is perfect work for blocked periods while waiting on Architect deliverables. Each phase of the 13-phase plan from v0.2.15 is self-contained and covered by the existing 56 tests.

---

## 4. Technical Approach for Each Major Component

### 4a. Cache Service Integration -- Analytics Collection + LETS Pipeline (D-04)

**Approach:** Build a new `Analytics__Service` class in `sgraph_ai_app_send/lambda__user/service/` that uses the cache service client to write and aggregate analytics data.

**Architecture:**

```python
# New files in sgraph_ai_app_send/lambda__user/service/
class Analytics__Service(Type_Safe):
    cache_client : Cache__Service__Fast_API__Client    # Cache service client

    def record_event(self, event_type, event_data):    # Raw event writer
        # Writes a file to cache service at temporal path:
        # {cache_id}/events/{year}/{month}/{day}/{hour}/{event_id}.json
        ...

    def aggregate_window(self, window_minutes=30):     # LETS: query + save
        # 1. Load raw events since last aggregation
        # 2. Extract metrics (request count, unique IPs, file ops)
        # 3. Transform into summary
        # 4. Save aggregation to temporal path
        # 5. Update "latest" with current aggregation
        ...

    def get_pulse(self):                                # Real-time pulse
        # Read "latest" aggregation -- near-instant
        ...

    def get_history(self, period='day'):                # Historical view
        # Cascade: read pre-computed aggregations at requested granularity
        ...
```

**LETS pipeline flow:**

1. **Load:** FastAPI middleware writes a raw event file for every request (path, method, timestamp, ip_hash, response_status)
2. **Extract:** Aggregation reads raw files from a time window
3. **Transform:** Produce counts, rates, per-path breakdowns
4. **Save:** Write aggregation to temporal + latest paths

**Aggregation cascade:**
- Raw events -> 30-minute aggregation (triggered on query)
- 2x 30-minute -> hourly aggregation
- 24x hourly -> daily aggregation
- 28-31x daily -> monthly aggregation

**Integration point:** Add a FastAPI middleware in `Fast_API__SGraph__App__Send__User` that calls `analytics_service.record_event()` on every request. This is lightweight -- just a file write to the cache service.

**Testing approach:** Following the cache service testing guidance in `library/guides/patterns/v1.1.4___v0.16.1__cache_service__testing_guidance.md`:
- Spin up `Cache_Service__Fast_API` on ephemeral port in `setUpClass`
- Configure `Analytics__Service` with `Temp_Env_Vars`
- Test full round-trip: record events -> aggregate -> query
- Verify from multiple angles (via analytics service, via cache client, via cache service directly)
- Target: all tests complete in under 500ms

**Blocked on:** Architect must define:
- Cache entry structure for analytics (what fields in the aggregation JSON?)
- Temporal granularity (30min as base, or configurable?)
- Cache ID naming scheme for analytics entries
- Whether LETS pipeline runs on-demand (triggered by query) or on schedule (timer/cron)

### 4b. Remove Google Analytics (D-05)

**Approach:** Surgical removal once D-04 provides the basic pulse.

**Files to modify:**
- `sgraph_ai_app_send__ui__user/v0/v0.1/v0.1.0/index.html` -- remove GA script tags
- `sgraph_ai_app_send__ui__user/v0/v0.1/v0.1.0/download.html` -- remove GA script tags (if present)
- Any `gtag()` calls in JS components

**IFD approach:** This is a removal, not an addition. The GA code was added to v0.1.0 directly. Under IFD, the removal is a minor version (v0.1.1) that overrides the GA-related functions to no-ops, or creates a new `index.html` in v0.1.1 that excludes the GA script tags. The clean approach: v0.1.1 index.html loads the same components but without the GA scripts.

**Verification:** After removal, confirm:
- No `google-analytics.com` or `googletagmanager.com` requests in browser network tab
- No `_ga` or `_gid` cookies set
- DPO can certify "zero cookies" policy
- Site functionality unchanged

### 4c. Human-Friendly Token System (D-07)

**Approach:** The token system now uses cache-hash resolution instead of direct token-ID lookup. This is a fundamental change from the Brief #1 token design.

**Flow:**

```
Admin creates token "community-x"
    |
    v
Hash "community-x" -> cache_hash (deterministic)
    |
    v
cache_hash resolves to cache_id (via cache service)
    |
    v
Cache entry at cache_id stores:
    /token.json          -- metadata (limit, created_at, status)
    /events/             -- temporal event log (every usage)
    /latest/usage.json   -- current usage count
```

**Backend implementation:**

```python
# New files in sgraph_ai_app_send/lambda__admin/service/
class Token__Service(Type_Safe):
    cache_client : Cache__Service__Fast_API__Client

    def create_token(self, token_name, usage_limit):
        # 1. Hash token_name -> cache_hash
        # 2. Create cache entry via cache_hash
        # 3. Store token metadata (limit, created_at, status)
        # 4. Return token info
        ...

    def validate_token(self, token_name):
        # 1. Hash token_name -> cache_hash
        # 2. Resolve cache_hash -> cache_id
        # 3. Load usage count from latest/usage.json
        # 4. Check against limit
        # 5. If allowed: increment count, record usage event
        # 6. Return validation result
        ...

    def get_token_info(self, token_name):
        # Hash -> resolve -> load metadata + usage count
        ...

    def list_tokens(self):
        # List all token cache entries (needs index pattern from Architect)
        ...
```

**Admin API routes (Admin Lambda):**

```python
POST /admin/tokens/create     -> { token_name, usage_limit }
GET  /admin/tokens             -> list all tokens with usage stats
GET  /admin/tokens/{name}/info -> token details + usage history
POST /admin/tokens/{name}/revoke -> revoke a token
```

**User-facing validation route (User Lambda):**

```python
GET  /tokens/validate/{token_name} -> { valid: bool, remaining: int }
```

**Token URL format (unchanged from Brief #1):**

```
https://send.sgraph.ai/?token=community-x
```

The token is in the query string (NOT the hash) because we want the backend to see it for tracking.

**Blocked on:** Architect must define:
- How cache-hash is generated from token string (which hash function, any salt?)
- Cache entry schema for tokens
- Whether token listing requires a separate index (cache service may not support listing all entries)
- Token lifecycle states and transitions

### 4d. Local Storage Transparency Panel (D-08)

**Approach:** New Web Component `send-storage-panel` that introspects `localStorage` and displays all SGraph Send keys.

**Implementation:**

```javascript
// v0.1.1/components/send-storage-panel/send-storage-panel.js
class SendStoragePanel extends HTMLElement {

    connectedCallback() {
        this.render();
    }

    getStorageItems() {
        // Enumerate all localStorage keys with 'sgraph' prefix
        const items = [];
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key.startsWith('sgraph-')) {
                items.push({
                    key:   key,
                    value: localStorage.getItem(key),
                    label: this.humanLabel(key)
                });
            }
        }
        return items;
    }

    humanLabel(key) {
        // Map internal keys to human-readable labels via i18n
        return t(`storage.${key}`) || key;
    }

    render() {
        const items = this.getStorageItems();
        // Render table: key | value | clear button
        // Render "Clear all" button
        // Render "Enable key caching" toggle
        // Render storage mode indicator (normal | zero-storage)
    }
}
```

**What gets displayed:**
- `sgraph-lang` -- Language preference (e.g., "en")
- `sgraph-theme` -- Theme preference (e.g., "dark")
- `sgraph-token` -- Invitation token used
- `sgraph-keys-*` -- Cached encryption keys (if opt-in enabled)
- `sgraph-storage-mode` -- Storage mode (normal/zero)

**All labels go through i18n** -- this is why D-08 depends on D-03.

### 4e. Modular Admin UI (D-09)

**Approach:** Event-driven architecture using Web Components. The admin UI at `sgraph_ai_app_send__ui__admin/` is currently a placeholder (`v0/v0.1/v0.1.0/index.html` contains only "IFD version v0.1.0 will go here"). We build from scratch following IFD.

**Architecture:**

```
admin-shell (top-level component)
    |
    +-- admin-nav (sidebar navigation)
    |
    +-- admin-content (dynamic module container)
         |
         +-- admin-dashboard (module: real-time pulse + counts)
         +-- admin-tokens (module: token CRUD + usage stats)
         +-- admin-analytics (module: historical traffic views)
         +-- admin-events (module: event log viewer)
```

**Event bus:**

```javascript
// v0.1.0/js/admin-event-bus.js
class AdminEventBus {
    constructor() { this.listeners = new Map(); }
    on(event, callback) { ... }
    off(event, callback) { ... }
    emit(event, data) { ... }
}
window.adminEventBus = new AdminEventBus();
```

**Module loading:**

```javascript
// Modules self-register on load
class AdminDashboard extends HTMLElement {
    static MODULE_ID = 'dashboard';
    static MODULE_LABEL = 'Dashboard';

    connectedCallback() {
        window.adminEventBus.on('data-refresh', () => this.refresh());
    }
}
customElements.define('admin-dashboard', AdminDashboard);
window.adminEventBus.emit('module-registered', {
    id: AdminDashboard.MODULE_ID,
    label: AdminDashboard.MODULE_LABEL
});
```

**Shell responds to module registration:**

```javascript
// admin-shell listens for module-registered events
// Dynamically adds nav items and lazy-loads module components
window.adminEventBus.on('module-registered', (module) => {
    this.addNavItem(module.id, module.label);
});
```

**IFD structure:**

```
sgraph_ai_app_send__ui__admin/
    v0/
        v0.1/
            v0.1.0/                         # Base major version
                index.html                  # Shell + module script tags
                css/admin.css               # Admin styles
                js/admin-event-bus.js       # Event bus
                js/admin-api-client.js      # Admin API client
                components/
                    admin-shell/admin-shell.js
                    admin-nav/admin-nav.js
                    admin-dashboard/admin-dashboard.js
                    admin-tokens/admin-tokens.js
```

### 4f. AWS Cost Collection (D-16)

**Approach:** Collector class using `osbot-aws` (never boto3 directly) to pull cost data from AWS Cost Explorer, store in cache service following the LETS pattern.

```python
class Cost__Collector(Type_Safe):
    cache_client : Cache__Service__Fast_API__Client

    def collect_daily_cost(self, date):
        # 1. Use osbot-aws Cost Explorer to get cost for date
        # 2. Store in cache service at temporal path
        # 3. Update latest/daily_cost.json
        ...

    def aggregate_weekly(self):
        # Combine 7 daily costs -> weekly summary
        ...

    def aggregate_monthly(self):
        # Combine daily costs -> monthly summary
        ...

    def get_unit_economics(self):
        # Correlate cost data with traffic data (from analytics)
        # Cost per request, cost per transfer, cost per active user
        ...
```

**Joint with DevOps:** DevOps provides the AWS Cost Explorer permissions and IAM configuration. Dev implements the collector and cache integration.

---

## 5. IFD Compliance Plan

### Principle

Every UI change from Brief #2 forward follows IFD. No exceptions. This means:
- Never override existing HTML/UI in place
- Every change creates a new version
- Minor versions contain surgical overrides only
- Previous versions remain accessible
- All changes have explicit version numbers

### Version Plan for User UI

Current state: `sgraph_ai_app_send__ui__user/v0/v0.1/v0.1.0/` is the base major version with 4 components (`send-upload`, `send-download`, `send-transparency`, `send-access-gate`), plus `js/crypto.js` and `js/api-client.js`.

**Planned minor versions:**

| Version | Content | Type |
|---------|---------|------|
| v0.1.0 | Current base (upload, download, transparency, access-gate) | Base major |
| v0.1.1 | Hash-fragment URLs -- surgical override of `send-upload.js` (`buildDownloadUrl`, `renderResult`) + `send-download.js` (`getTransferIdFromUrl`, `connectedCallback`) | Surgical override |
| v0.1.2 | Text input mode -- surgical override of `send-upload.js` (`renderDropZone`, `startUpload`) + new state handling | Surgical override |
| v0.1.3 | i18n integration -- new `js/i18n.js` + `i18n/en.json` + `i18n/pt.json` + surgical overrides of all `render()` methods to use `t()` | Foundation + overrides |
| v0.1.4 | Email sharing panel -- surgical override of `send-upload.js` (`renderResult`) to add sharing buttons | Surgical override |
| v0.1.5 | Drag-and-drop fix -- surgical override of `send-upload.js` (`renderResult`) to use `<a>` element | Surgical override |
| v0.1.6 | Transparency panel -- new `send-storage-panel` component | New component |
| v0.1.7 | Theme system -- new `js/theme-manager.js` + CSS custom property overrides | Foundation + CSS overrides |
| v0.1.8 | Landing page content (with i18n keys) | Content addition |
| v0.1.9 | Event data UI in download page | Surgical override |

**Consolidation to v0.2.0:** After v0.1.x stabilises (all surgical patches proven and tested), merge into a clean v0.2.0 base. This is the next major version checkpoint.

### Version Plan for Admin UI

The admin UI starts fresh. `v0.1.0` is the full base build:

| Version | Content | Type |
|---------|---------|------|
| v0.1.0 | Admin shell + event bus + nav + dashboard + tokens modules | Base major |
| v0.1.1 | Analytics module (after cache service is live) | New module |
| v0.1.2 | Event log module | New module |
| v0.1.3 | Cost tracking module (after D-16) | New module |

### IFD Enforcement

**Before merging any UI PR, verify:**
1. Changes are in the correct version folder (not modifying v0.1.0 directly after v0.1.1 exists)
2. Override files contain ONLY the surgical changes (not full file copies)
3. The corresponding `index.html` loads scripts in correct version order
4. Previous version's `index.html` still works (instant rollback)
5. All new strings use `t('key')` (after v0.1.3 lands)

### Loading Order Example (after v0.1.5)

```html
<!-- v0.1.5/index.html -->
<head>
    <link rel="stylesheet" href="../v0.1.0/css/common.css">
</head>
<body>
    <!-- Base components -->
    <script src="../v0.1.0/js/crypto.js"></script>
    <script src="../v0.1.0/js/api-client.js"></script>
    <script src="../v0.1.0/components/send-transparency/send-transparency.js"></script>
    <script src="../v0.1.0/components/send-upload/send-upload.js"></script>
    <script src="../v0.1.0/components/send-download/send-download.js"></script>
    <script src="../v0.1.0/components/send-access-gate/send-access-gate.js"></script>

    <!-- Surgical overrides in version order -->
    <script src="../v0.1.1/components/send-upload/send-upload.js"></script>
    <script src="../v0.1.1/components/send-download/send-download.js"></script>
    <script src="../v0.1.2/components/send-upload/send-upload.js"></script>
    <script src="../v0.1.3/js/i18n.js"></script>
    <!-- v0.1.3 render() overrides for all components -->
    <script src="../v0.1.4/components/send-upload/send-upload.js"></script>
    <script src="components/send-upload/send-upload.js"></script>

    <!-- Application -->
    <send-access-gate></send-access-gate>
</body>
```

---

## 6. Dependencies Map

### External Dependencies (Dev is blocked by)

| Dependency | Provider | Blocks | Priority |
|------------|----------|--------|----------|
| Cache service schema (analytics entries, temporal structure, aggregation levels, LETS trigger model) | **Architect** | D-04, D-05, D-07, D-13, D-16 | **CRITICAL** |
| Cache service schema (token entries, cache-hash generation, token lifecycle states) | **Architect** | D-07 | **CRITICAL** |
| Cache service schema (cost entries) | **Architect** | D-16 | P2 |
| Journalist copy for landing page | Journalist | D-11 | P2 |
| Journalist copy for email template | Journalist | D-12 (partially) | P2 |
| Designer theme palettes (CSS variable values) | Designer | D-14 | P2 |
| DevOps AWS Cost Explorer IAM + permissions | DevOps | D-16 | P2 |
| DPO review of local key caching | DPO | D-08 (guidance for disclosure text) | P2 |
| CloudFront logs enabled with IP masking | DevOps + DPO | D-04 (log source for analytics) | P2 |

### Internal Dependencies (Dev task ordering)

```
D-01 (hash-fragment URLs)
    |
    +-> D-12 (email sharing) -- needs hash-fragment URL format

D-03 (i18n foundation)
    |
    +-> D-08 (transparency panel) -- all strings through i18n
    +-> D-11 (landing page content) -- content as i18n keys
    +-> D-14 (theme system) -- theme names through i18n
    +-> All subsequent UI work -- no more hardcoded strings

D-04 (cache service + LETS pipeline)
    |
    +-> D-05 (remove GA) -- needs basic pulse working
    +-> D-07 (token system) -- shares cache service infrastructure
    +-> D-13 (event data UI) -- events now in cache service
    +-> D-16 (AWS cost collection) -- uses LETS pipeline

D-08 (transparency panel)
    |
    +-> D-17 (zero-local-storage mode) -- extends panel with mode toggle
```

### Dependency Graph (ASCII)

```
                       [Architect Schema] -------- CRITICAL GATE
                       /       |        \
                      /        |         \
                D-04 (analytics) D-07 (tokens) D-16 (costs)
                /    \          |
            D-05     D-13      |
          (rm GA)  (event UI)  |
                               |
[No blockers]            [Architect schema]
     |                         |
D-01 -> D-12            D-07 (tokens)
D-02                          |
D-03 -> D-08 -> D-17    D-09 (admin UI)
   \-> D-11                   |
    \-> D-14            [integrates D-07 + D-13 modules]
D-15
D-18 (interleaved)
```

---

## 7. What Changed from Brief #1 to Brief #2

| Brief #1 Item | Brief #2 Evolution | Impact on Dev |
|----------------|-------------------|---------------|
| Observability pipeline (collect to S3) | Replaced by cache service + LETS pipeline | Completely different storage and query model. D-04 is new. |
| Admin token system (UUID tokens, Memory-FS storage) | Replaced by human-friendly tokens with cache-hash resolution + usage limits | D-10 merged into D-07. Larger scope, different backend architecture. |
| Google Analytics integration | Being removed, replaced by server-side analytics | D-05 added. GA code becomes dead code once cache analytics work. |
| Event data UI (read from Memory-FS) | Events now stored in cache service | D-13 depends on D-04 instead of being standalone. |
| Hash-fragment URLs | Unchanged, still APPROVED | D-01 proceeds as planned. |
| Text input | Unchanged | D-02 proceeds as planned. |
| i18n foundation | Unchanged, reinforced as architectural prerequisite | D-03 is even more urgent (more UI content coming). |
| Theme system | Unchanged | D-14 proceeds as planned. |
| Email sharing | Unchanged | D-12 proceeds as planned. |

---

## 8. Risk Register

| Risk | Likelihood | Impact | Mitigation |
|------|-----------|--------|-----------|
| Architect schema delivery delayed | Medium | High -- blocks 5 tasks (D-04, D-05, D-07, D-13, D-16) | Dev proceeds with non-blocked items (D-01, D-02, D-03, D-09, D-15, D-18). Request Architect prioritise schema above all other work. |
| Cache service client (`Cache__Service__Fast_API__Client`) has undocumented behavior | Low | Medium -- integration surprises | Use the testing guidance in `library/guides/patterns/` and build integration tests early with ephemeral server. |
| IFD surgical overrides become complex (too many chained overrides in v0.1.x) | Medium | Low -- manageable by consolidation | Plan consolidation to v0.2.0 after v0.1.5 or when loading order exceeds 10 script tags. |
| GA removal breaks something unexpected | Low | Low -- GA is isolated script | Smoke test after removal: verify all upload/download flows still work. |
| Type_Safe refactor introduces regressions | Low | Medium | 56 existing tests provide regression safety. Each phase is small and independently verifiable. |

---

## 9. Immediate Next Actions

| # | Action | Est. | Depends On |
|---|--------|------|-----------|
| 1 | **Start D-01** (hash-fragment URLs) -- highest impact, zero blockers | 2-3h | Nothing |
| 2 | **Start D-02** (text input) -- P1, zero blockers | 4-6h | Nothing |
| 3 | **Start D-15** (drag-and-drop fix) -- quick win between tasks | 1-2h | Nothing |
| 4 | **Request Architect** to prioritise cache service schema design | -- | Conductor to route |
| 5 | **Start D-03** (i18n) once D-01 + D-02 are shipped | 6-8h | D-01, D-02 done |
| 6 | **Start D-18** (Type_Safe refactor Phase 1) during any blocked periods | 2-3h per phase | Nothing |

---

## References

| Document | Path |
|----------|------|
| Daily Brief #2 | `team/humans/dinis_cruz/briefs/02/13/v0.2.32__daily-brief__2__sgraph-send-13-feb-2026.md` |
| Daily Brief #1 | `team/humans/dinis_cruz/briefs/02/13/v0.2.32__daily-brief__1__sgraph-send-13-feb-2026.md` |
| Dev response to Brief #1 | `team/roles/dev/reviews/26-02-13/v0.2.24__response-to-daily-brief__13-feb.md` |
| Dev status report (post-launch) | `team/roles/dev/reviews/26-02-13/v0.2.24__status-report__post-launch.md` |
| Architect response to Brief #1 | `team/roles/architect/reviews/26-02-13/v0.2.24__response-to-daily-brief__13-feb.md` |
| Debrief (Brief #1 responses) | `team/humans/dinis_cruz/debriefs/02/13/v0.2.32__debrief__daily-brief-responses-13-feb.md` |
| IFD versioning guide | `library/guides/development/ifd/v1.2.0__ifd__versioning_guide.md` |
| Cache service testing guidance | `library/guides/patterns/v1.1.4___v0.16.1__cache_service__testing_guidance.md` |
| Transfer__Service.py | `sgraph_ai_app_send/lambda__user/service/Transfer__Service.py` |
| Routes__Transfers.py | `sgraph_ai_app_send/lambda__user/fast_api/routes/Routes__Transfers.py` |
| Send__Config.py | `sgraph_ai_app_send/lambda__user/storage/Send__Config.py` |
| User UI components | `sgraph_ai_app_send__ui__user/v0/v0.1/v0.1.0/components/` |
| Admin UI (placeholder) | `sgraph_ai_app_send__ui__admin/v0/v0.1/v0.1.0/index.html` |

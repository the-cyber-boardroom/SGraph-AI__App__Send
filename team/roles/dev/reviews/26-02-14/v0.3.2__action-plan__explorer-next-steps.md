# Dev Action Plan: Explorer Next Steps

**Version:** v0.3.2
**Date:** 14 February 2026
**Role:** Dev (Explorer Team)
**Status:** Active

---

## Context

The end-to-end MVP is working. Real users have completed the full flow: open page, log in with token, drag and drop file, encrypt, copy link, open new window, paste link, download file. The v0.3.2 daily brief introduces the Explorer/Villager team split. This action plan captures what Dev needs to do on the Explorer side.

**Inputs reviewed:**
- [v0.3.2 daily brief](../../../../humans/dinis_cruz/briefs/02/14/v0.3.2__daily-brief__sgraph-send-14-feb-2026.md)
- [IFD broken independence analysis](v0.2.41__review__ifd-broken-independence-analysis.md)
- [osbot capabilities and cache service audit](v0.2.41__review__osbot-capabilities-and-cache-service-audit.md)
- [Explorer role definition](../../../../humans/dinis_cruz/briefs/02/14/v0.3.2__role-definition__explorer.md)
- [Architect next steps from Wardley briefs](../../architect/reviews/26-02-14/v0.3.0__review__next-steps-from-wardley-briefs.md)

---

## 1. Ongoing Explorer Work

The Explorer Dev continues building features and iterating via minor versions. These are the active and upcoming workstreams:

### 1.1 Large File Transfer Architecture (P2 — design now, build later)

The daily brief identifies large file transfers (1 GB+) as the product sweet spot. The Architect owns the design (chunked uploads, retry logic, checksum verification), but Dev needs to:

| # | Task | Status | Notes |
|---|------|--------|-------|
| LF-1 | Review Architect's chunked upload design when ready | Pending | Encryption before or after chunking has implications — Dev needs to validate feasibility |
| LF-2 | Prototype client-side chunking in a v0.1.5+ minor version | Pending | Web Crypto API + File.slice() for chunk-then-encrypt or encrypt-then-chunk |
| LF-3 | Extend `Transfer__Service` for multipart upload tracking | Pending | Server needs chunk manifest, completion endpoint, integrity verification |
| LF-4 | Ensure Memory-FS abstraction supports S3 multipart uploads | Pending | `Storage_FS__S3` may need new methods — consult with Architect |

**Not now.** This is a design-then-build item. No code until the Architect produces the architecture doc.

### 1.2 Unencrypted Mode (P3 — evaluate)

The brief asks whether files can be sent without encryption for large non-sensitive transfers. Dev implications:

- The `Transfer__Service` currently assumes all payloads are ciphertext. An unencrypted mode would need a `mode` field on `Schema__Transfer` (e.g., `encrypted` / `plaintext`).
- The download flow in the UI would skip the decryption step based on mode.
- This must be a pluggable option, not a fundamental change. The current architecture supports this — the server already has no awareness of whether content is encrypted (it just stores bytes).

**Dev action:** No code changes yet. Wait for Advocate/AppSec/Architect evaluation. If approved, the change is small — add a mode flag and conditionally skip crypto in the UI.

### 1.3 Read Receipts (P3 — roadmap)

The event data for download events already exists in the analytics middleware (`Schema__Analytics__Raw_Event`). Surfacing read receipts means:

- Adding a query endpoint: "given a transfer_id, return all download events"
- Exposing this in the user UI (sender view)

**Dev action:** Pending Architect roadmap capture. Low effort when prioritised — the data is already being recorded.

### 1.4 Multi-File Upload / Folder Management (P3 — roadmap)

This is a larger feature involving:

- UI changes for multiple file selection
- Multiple `Transfer__Service.create()` calls or a batch API
- A "collection" concept linking multiple transfers

**Dev action:** Pending Architect design. Not trivial — needs its own exploration cycle.

---

## 2. IFD Compliance

### 2.1 Current State: v0.1.x Broken Independence (Accepted)

Per the [IFD broken independence analysis](v0.2.41__review__ifd-broken-independence-analysis.md), versions v0.1.1 through v0.1.4 of the user UI violate IFD's surgical override principle:

- **Full class copies** instead of prototype method overrides (~400-500 lines per version instead of ~15 lines)
- **`customElements.define()` re-declaration** in every minor version (should only be called once in v0.1.0)
- **Cross-version asset coupling** — all versions reference `../v0.1.0/` assets via relative paths

**Decision:** Accepted as-is. No retrofit. Carry lessons to v0.2.0.

### 2.2 v0.2.0 Consolidation — Next Steps

When v0.2.0 is created (the next major consolidation), Dev must:

| # | Task | Status | Notes |
|---|------|--------|-------|
| IFD-1 | Merge all v0.1.x changes into a single self-contained v0.2.0 baseline | Pending | All features from v0.1.0-v0.1.4 merged into one clean codebase |
| IFD-2 | Use prototype method overrides from v0.2.1 onward | Pending | `SendUpload.prototype.methodName = function() { ... }` pattern |
| IFD-3 | Never call `customElements.define()` in minor versions | Pending | Only v0.2.0 defines custom elements |
| IFD-4 | Add IFD pre-commit lint check (flag minor version files > 100 lines) | Pending | Simple guard rail to prevent regression |
| IFD-5 | Update IFD Versioning Guide with Web Components constraints | Pending | Document `customElements.define()` once-per-tag rule |

**Timing:** v0.2.0 is a Villager output (the IFD major release). But Dev (Explorer) must prepare the content — the merged codebase that v0.2.0 consolidates. The Villager then packages, tests, and deploys it.

### 2.3 Admin UI — IFD Status

The admin UI is at v0.1.0 only — no minor versions yet. This is clean from an IFD perspective. When minor versions are added, they should follow the corrected pattern from day one.

---

## 3. Admin UI Status

### 3.1 What Exists

The admin UI (`sgraph_ai_app_send__ui__admin/v0/v0.1/v0.1.0/`) ships with:

| Component | File | Status |
|-----------|------|--------|
| `admin-shell` | `components/admin-shell/admin-shell.js` | Shipped |
| `token-manager` | `components/token-manager/token-manager.js` | Shipped |
| `analytics-dashboard` | `components/analytics-dashboard/analytics-dashboard.js` | Shipped |
| `system-info` | `components/system-info/system-info.js` | Shipped |
| Admin API client | `js/admin-api.js` | Shipped |
| Admin styles | `css/admin.css` | Shipped |
| Entry point | `index.html` | Shipped |

Backend routes supporting the admin UI:

| Route Class | Endpoint | Status |
|-------------|----------|--------|
| `Routes__Tokens` | `create`, `lookup/{name}`, `use`, `revoke/{name}`, `list_all` | Shipped, tested |
| `Routes__Analytics` | `pulse` | Shipped, tested |

### 3.2 What's Left to Build (Explorer)

From the [Conductor's response to the daily brief](../../conductor/reviews/26-02-14/v0.3.0__response-to-daily-brief__14-feb.md):

| # | Feature | Priority | Notes |
|---|---------|----------|-------|
| A-1 | Token detail view (click token name to see full details) | P1 | Backend `GET /tokens/lookup/{name}` exists — UI needs to call it |
| A-2 | Token usage event history display | P2 | Data exists in cache service — needs UI component to display |
| A-3 | System info panel shows version from backend | P3 | Version file exists at `sgraph_ai_app_send/version` — needs API endpoint |
| A-4 | Transfer list / transfer detail view | P2 | Not yet built — admin needs visibility into active transfers |
| A-5 | Analytics time-series charts | P3 | Pulse endpoint returns aggregates — needs time-series query + charting |

**Dev action:** A-1 is the next admin UI task. It requires a v0.1.1 minor version of the admin UI. This time, follow the correct IFD pattern from the start (prototype overrides, not full class copies).

---

## 4. Issues FS Integration

### 4.1 Current State

The `.issues/` directory exists with a structured `issue.json` hierarchy:

```
.issues/
  issue.json                    (Repo root — SGraph Send)
  config/
  issues/
    Project-1/
      issue.json                (SGraph Send MVP & Roadmap)
      issues/
        Phase-1/                (9 Features, 50+ Tasks)
        Phase-2/ through Phase-5/
```

This is the **original complex format** — nested `issue.json` files. The v0.3.2 brief says a new **flat file format** is now available (`.issues` text files where each line is an issue). The brief explicitly says the old format was too complex for agents.

### 4.2 Code Changes Needed

There is no direct code integration required — Issues FS is a project management tool, not an application feature. However, Dev should:

| # | Task | Status | Notes |
|---|------|--------|-------|
| IF-1 | Create a `.issues` flat file for the Explorer Dev workstream | Pending | Track active feature work, IFD tasks, carries forward |
| IF-2 | Update `.issues` when starting/completing work | Ongoing | Per brief: "when you start work, update the relevant `.issues` file" |
| IF-3 | Ensure test coverage tasks are tracked in Issues FS | Pending | QA can cross-reference |

**No application code changes.** Issues FS is a workflow tool. The integration is process-level, not code-level.

---

## 5. Handover Preparation

The Architect's [next steps review](../../architect/reviews/26-02-14/v0.3.0__review__next-steps-from-wardley-briefs.md) identifies five components in the "handover zone" — mature enough for the Villager team to productise:

1. **Browser encryption** (AES-256-GCM, Web Crypto API)
2. **File upload/download** (transfer lifecycle)
3. **S3 storage backend** (Memory-FS with S3 provider)
4. **Token system** (create, use, revoke, list)
5. **Link sharing** (encrypted URL with fragment-based key)

### 5.1 What Dev Must Do Before Handover

| # | Task | Component | Status | Notes |
|---|------|-----------|--------|-------|
| H-1 | Document all public API contracts with request/response examples | All 5 | Pending | Architect leads, Dev provides implementation detail |
| H-2 | Ensure every route has at least one happy-path and one error-path test | Routes__Transfers, Routes__Tokens | Partial | Current: 32 test files, 111+ tests. Need to verify coverage of error paths |
| H-3 | Document known limitations for each component | All 5 | Pending | e.g., max file size untested, no retry on upload failure, token revocation is soft-delete |
| H-4 | Capture environment variable dependencies | All 5 | Pending | `user__config.py` and `admin__config.py` list them — need structured handover doc |
| H-5 | Verify `Storage_FS` backend swap works correctly (memory -> S3) | S3 storage | Partial | Tests use in-memory; need to confirm S3 path with LocalStack |
| H-6 | Document the Service Registry configuration for each Lambda | Admin + User | Pending | IN_MEMORY vs REMOTE modes, setup sequence |
| H-7 | Write the v0.2.0 user UI consolidated baseline | User UI | Pending | Merge v0.1.0-v0.1.4 into single clean version (IFD-1) |

### 5.2 Handover Brief Format

Per the Architect's recommendation (AD-2), handover briefs should go to:
`team/roles/explorer/handovers/{version}__handover__{component}.md`

Dev contributes sections 2 (architecture), 3 (known limitations), 4 (performance), and 5 (test coverage) for each component.

---

## 6. Carries Forward

These items from previous reviews still need attention:

### 6.1 Token Gate i18n Bug (F015)

**Source:** [Conductor daily brief response](../../conductor/reviews/26-02-14/v0.3.0__response-to-daily-brief__14-feb.md), originally from v0.1.3 cycle.

**Description:** The token gate (access-gate component) has an i18n issue — deferred from v0.1.4. Likely affects the `send-access-gate` component in `v0.1.0/components/send-access-gate/`.

**Status:** Known bug, P2. Deferred. Will be addressed in a future minor version (v0.1.5 or rolled into v0.2.0 consolidation).

**Dev action:** Fix when next UI minor version is created. Small scope — localise hardcoded strings in the access gate component.

### 6.2 osbot Capability Gaps

From the [osbot capabilities audit](v0.2.41__review__osbot-capabilities-and-cache-service-audit.md):

| Gap | Description | Action |
|-----|-------------|--------|
| `Safe_Str__Iso_Timestamp` | Doesn't exist — ISO timestamp strings are still raw `str` | Request from osbot-utils maintainer or use `Timestamp_Now` consistently |
| Rate limiting middleware | Available in osbot-fast-api but not used | Evaluate when traffic increases — Villager territory |
| `TEMPORAL_LATEST` cache strategy | Available but unused — useful for real-time dashboard pulse | Explore for analytics dashboard (A-5) |
| Content-addressable deduplication | Available in cache service | Explore for duplicate transfer detection |
| WebSocket routes | Available in osbot-fast-api | Explore for real-time transfer progress (relevant to large file transfers) |

### 6.3 Safe Type Gotcha

**Lesson from v0.2.41:** `Safe_Str__Id` strips `/`, `:`, `+`. Always test safe types with real data before using them for new fields. MIME types and URL paths need `Safe_Str__Http__Content_Type` and `Safe_Str__File__Path` respectively, not `Safe_Str__Id`.

### 6.4 Cross-Version Asset Coupling

All v0.1.1-v0.1.4 user UI versions reference `../v0.1.0/` for shared assets (CSS, crypto.js, api-client.js, components). If v0.1.0 assets are modified, all downstream versions silently change behaviour. This is a known risk accepted in the IFD broken independence decision. Resolution is v0.2.0 consolidation (H-7 / IFD-1).

---

## 7. What Dev Does NOT Do (Explorer Context)

Per the [Explorer role definition](../../../../humans/dinis_cruz/briefs/02/14/v0.3.2__role-definition__explorer.md), the following are explicitly outside Explorer Dev scope:

| Activity | Owned By | Why Not Explorer Dev |
|----------|----------|---------------------|
| **Performance optimisation** | Villager Dev | "Exploration code needs to work, not be fast. Performance optimisation is the Villager's job." |
| **Production deployment** | Villager DevOps | "The Explorer does not maintain production. If something breaks in production, that's the Villager's domain." |
| **IFD major releases** | Villager meta-role + Villager Dev + Villager DevOps | "Minor versions, yes. IFD releases (major versions for production), no. That's the Villager's output." |
| **Production CI/CD pipeline** | Villager DevOps | Separate infrastructure is a hard requirement. Explorer pipeline is for testing only. |
| **Load testing / performance benchmarking** | Villager QA + DevOps | Explorer tests for correctness, not performance. |
| **Security hardening for production** | Villager AppSec + CISO | Code-level security review happens during exploration, but production hardening (TLS config, WAF rules, Lambda concurrency limits) is Villager work. |
| **Monitoring and alerting setup** | Villager DevOps | Production observability is Villager territory. Explorer builds the analytics middleware; Villager connects it to production monitoring. |

**Explorer Dev focuses on:** building features, experimenting with approaches, iterating on minor versions, capturing what works and what doesn't, preparing handover documentation.

---

## Priority Summary

| Priority | Task ID | Description | Effort |
|----------|---------|-------------|--------|
| **P1** | H-1 to H-7 | Handover preparation for 5 mature MVP components | Medium-Large |
| **P1** | IFD-1, IFD-5 | v0.2.0 consolidation prep + IFD guide update | Medium |
| **P1** | IF-1 | Create `.issues` flat file for Explorer Dev workstream | Small |
| **P2** | A-1 | Admin UI: token detail view (v0.1.1 minor version) | Small |
| **P2** | F015 | Token gate i18n bug fix | Small |
| **P2** | A-2, A-4 | Admin UI: token usage history, transfer list | Medium |
| **P3** | LF-1 to LF-4 | Large file transfer prototype (after Architect design) | Large |
| **P3** | A-3, A-5 | Admin UI: system info, analytics charts | Small-Medium |
| **P3** | Unencrypted mode, read receipts, multi-file upload | Design evaluation | Pending Architect |

---

## Next Immediate Action

1. Create the Explorer Dev `.issues` file (IF-1)
2. Start handover documentation for the five mature components (H-1 through H-6)
3. Build the v0.2.0 user UI consolidated baseline (H-7 / IFD-1) — this is the single largest Dev deliverable before the Villager can create the first IFD release

---

*Dev action plan complete. Explorer team continues building and documenting. Villager team takes over for production release.*

# SGraph Send — v0.3.5 Release Overview

**Date:** 15 February 2026
**Version:** v0.3.5
**Status:** End-to-end MVP live, admin UI shipped, two-team model active

> If you only read one file in this release pack, read this one.

---

## What Is SGraph Send?

Zero-knowledge encrypted file sharing at [send.sgraph.ai](https://send.sgraph.ai).

Files are encrypted in the browser using AES-256-GCM (Web Crypto API) before upload. The decryption key never leaves the sender's device — it's shared via URL hash-fragment, which browsers never transmit to servers. The server stores only encrypted ciphertext. It cannot decrypt files, does not know file names, and never sees the key.

---

## What's Live

Two AWS Lambda functions serve the entire system via Lambda Function URLs (direct HTTPS, no API Gateway):

| Lambda | Purpose | Auth |
|--------|---------|------|
| **User Lambda** | File transfers, health, static UI | Per-route token validation |
| **Admin Lambda** | Token management, analytics, admin console | Global API key |

Both Lambdas auto-deploy on every push to `dev` (minor version) and `main` (major version + PyPI publish) via GitHub Actions CI/CD. Pipeline time: ~90 seconds.

**Storage:** S3-backed Memory-FS abstraction. Application code never touches S3 directly — it uses `Storage_FS`, which swaps between in-memory (tests), disk (local dev), and S3 (production) transparently.

**Frontend:** Three UIs built with vanilla JS Web Components (IFD methodology, zero framework dependencies):
- **User workflow** — upload/download at `/send` (v0.1.4)
- **Admin console** — token/analytics management at `/admin` (v0.1.0)
- **User tools** — power user features (planned)

---

## Architecture at a Glance

```
Browser                          AWS
┌─────────────────┐    ┌─────────────────────────────────┐
│ Web Crypto API  │    │  User Lambda (public)           │
│ AES-256-GCM     │───▶│  ├─ POST /transfers/create      │
│ encrypt/decrypt │    │  ├─ POST /transfers/upload/{id}  │
│                 │    │  ├─ POST /transfers/complete/{id}│
│ Key stays here  │    │  ├─ GET  /transfers/info/{id}    │
│ (hash-fragment) │    │  ├─ GET  /transfers/download/{id}│
└─────────────────┘    │  └─ Static UI (/send)           │
                       │         │                        │
                       │         ▼ Storage_FS (S3)        │
                       │         │                        │
                       │  Admin Lambda (authenticated)    │
                       │  ├─ POST /tokens/create          │
                       │  ├─ GET  /tokens/lookup/{name}   │
                       │  ├─ POST /tokens/use/{name}      │
                       │  ├─ POST /tokens/revoke/{name}   │
                       │  ├─ GET  /tokens/list            │
                       │  ├─ GET  /health/pulse           │
                       │  └─ Static UI (/admin)           │
                       └─────────────────────────────────┘
```

For the full system topology with data flows and security boundaries, see [Cartographer](v0.3.5__cartographer.md).
For API contracts and data models, see [Architect](v0.3.5__architect.md).

---

## Technology Stack

| Layer | Technology | Constraint |
|-------|-----------|------------|
| Runtime | Python 3.12 (Lambda runs 3.13) | arm64 |
| Web framework | FastAPI via `osbot-fast-api` / `osbot-fast-api-serverless` | `Serverless__Fast_API` base class |
| Type system | `Type_Safe` from `osbot-utils` | Never Pydantic |
| AWS operations | `osbot-aws` | Never boto3 directly |
| Storage | Memory-FS (`Storage_FS`) | Pluggable backends |
| Caching | MGraph-AI Cache Service | IN_MEMORY mode in Lambda |
| Frontend | Vanilla JS + Web Components | Zero framework dependencies |
| Encryption | Web Crypto API (AES-256-GCM) | Client-side only |
| Testing | pytest, in-memory stack | No mocks, no patches |
| CI/CD | GitHub Actions | Pytest-driven deployment |

---

## Security Model

The security architecture is **zero-knowledge by design**:

- **Server never sees plaintext** — encryption/decryption happens exclusively in the browser
- **No file names on server** — original file name is never transmitted
- **No decryption keys on server** — key stays in URL hash-fragment (RFC 3986: never sent to server)
- **IP addresses hashed** — SHA-256, stored as `ip_hash`
- **All backend data is non-sensitive** — by construction, not by policy

Threat model covers STRIDE analysis across 4 trust boundaries (Public, Sender, Admin, Client-only). See [AppSec](v0.3.5__appsec.md) for the full threat model, risk register (37 entries), and zero-knowledge verification.

---

## Test Coverage

- **111+ backend unit tests** — pytest, full in-memory stack (~100ms startup)
- **56 core transfer tests** — complete lifecycle coverage
- **11 integration smoke tests** — health, auth, static pages
- **No mocks, no patches** — all tests use real implementations with `Storage_FS__Memory`
- **Overall QA score: 5.4/10** — strong happy path, gaps in auth edge cases and error handling

Key gaps: auth edge cases, S3 integration tests, E2E browser tests, upload size limits. See [QA](v0.3.5__qa.md) for the full test strategy and gap analysis.

---

## CI/CD Pipeline

```
Push to dev → Unit Tests → Tag (minor) → Check AWS Creds → Deploy Admin Lambda ─┐
                                                          → Deploy User Lambda ──┘ (~90s total)

Push to main → Unit Tests → Tag (major) → PyPI Publish → Check AWS Creds → Deploy to QA
```

Deployments are **pytest-driven**: each deployment step is a test method with assertions. If any step fails, the pipeline fails. See [DevOps](v0.3.5__devops.md) for pipeline details, secrets, and environment configuration.

---

## Key Decisions (selected)

| # | Decision | Status |
|---|----------|--------|
| D014 | Hash-fragment URLs for one-click file access | Approved |
| D017 | i18n before new content (8 languages from day one) | Approved |
| D034 | MGraph-AI Cache Service replaces custom analytics | Approved |
| D038 | Explorer/Villager team split (Wardley Maps) | Active |
| D040 | IFD methodology for all frontend work | Active |
| D043 | Engage external design agency (Cruz & Cruz) | Active |

Full decision catalogue (D001–D047) in [Historian](v0.3.5__historian.md). Decision register maintained by [Librarian](v0.3.5__librarian.md).

---

## Two-Team Model

As of v0.3.0, the project operates with two teams based on Wardley Maps methodology:

| Team | Focus | Stage | Output |
|------|-------|-------|--------|
| **Explorer** | Discover, experiment, build first versions | Genesis → Custom-Built | Minor versions (IFD) |
| **Villager** | Stabilise, harden, deploy to production | Custom-Built → Product | Major versions (IFD releases) |

21 components mapped on the Wardley evolution axis. 5 Custom-Built components identified as ready for Villager handover: browser encryption, file transfer flow, S3 backend, token system, link sharing.

See [Cartographer](v0.3.5__cartographer.md) for the evolution map and handover pipeline.

---

## What's Next

### Explorer Track
1. Design agency brief (Cruz & Cruz) — logo, brand identity, website mockups
2. Large file transfer architecture (chunked uploads, chunk-then-encrypt)
3. External partner Claude bot research
4. Slack/WhatsApp bot integration research
5. Unencrypted mode evaluation (pluggable, encrypted by default)

### Villager Track
1. IFD production release hardening
2. Deployment monitoring (CloudWatch alarms, structured logging)
3. Rate limiting and CORS lockdown
4. S3 lifecycle rules (TTL for transfer objects)
5. Post-deploy smoke tests in CI

---

## Production Readiness Gaps

| Priority | Gap | Owner |
|----------|-----|-------|
| P0 | No rate limiting on API endpoints | DevOps + Architect |
| P0 | No CloudWatch alarms | DevOps |
| P0 | CORS not locked down | DevOps |
| P1 | No S3 lifecycle rules (no TTL) | DevOps |
| P1 | No post-deploy smoke tests in CI | QA + DevOps |
| P1 | No production deployment CI trigger | DevOps |
| P1 | Auth edge cases untested | QA |
| P2 | No Dockerfile | DevOps |
| P2 | No E2E browser tests | QA |

---

## Role Documents in This Pack

Each document focuses on one role's unique contribution. Cross-references replace duplication.

| Document | Role | Focus |
|----------|------|-------|
| [Architect](v0.3.5__architect.md) | Architect | API contracts, data models, two-Lambda design, storage abstraction |
| [DevOps](v0.3.5__devops.md) | DevOps | CI/CD pipeline, Lambda deployment, environments, secrets, gaps |
| [Cartographer](v0.3.5__cartographer.md) | Cartographer | System topology, data flows, Wardley evolution map, component maps |
| [AppSec](v0.3.5__appsec.md) | AppSec | Threat model, STRIDE analysis, risk register, zero-knowledge verification |
| [QA](v0.3.5__qa.md) | QA | Test strategy, coverage metrics, gap analysis, test patterns |
| [Dev](v0.3.5__dev.md) | Dev | Codebase structure, implementation patterns, conventions, tech debt |
| [Librarian](v0.3.5__librarian.md) | Librarian | Master index, decision register, document chain, knowledge metrics |
| [Conductor](v0.3.5__conductor.md) | Conductor | Sprint planning, task prioritisation, role activation, success criteria |
| [Historian](v0.3.5__historian.md) | Historian | Milestones (M001–M014), decision log (D001–D047), named patterns |
| [Designer](v0.3.5__designer.md) | Designer | UX assessment, design agency brief, brand/themes, landing page |
| [Journalist](v0.3.5__journalist.md) | Journalist | Content produced, messaging strategy, transparency explainer |
| [Advocate](v0.3.5__advocate.md) | Advocate | User personas, trust assessment, product-market fit, recommendations |
| [Sherpa](v0.3.5__sherpa.md) | Sherpa | Friction logs, user journeys, onboarding, guidance strategy |

---

*This is a self-contained release pack. All documents cross-reference each other within this folder. No external documents are required to understand the v0.3.5 state of SGraph Send.*

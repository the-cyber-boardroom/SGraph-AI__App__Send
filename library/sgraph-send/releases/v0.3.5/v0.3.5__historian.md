# SGraph Send v0.3.5 — Historian

**Role:** Decision tracking, milestone records, named patterns, project narrative.

> For the decision cross-reference index see [Librarian](v0.3.5__librarian.md). For sprint context see [Conductor](v0.3.5__conductor.md).

---

## Project Timeline

```
Day 1 (10 Feb) ── Project start, architecture plans, infrastructure brief
Day 2 (11 Feb) ── Dev implementation begins, Type_Safe patterns established
Day 3 (12 Feb) ── MVP shipped, first user site live, 56 tests
Day 4 (13 Feb) ── Daily briefs, feature expansion, cache service, 111 tests
Day 5 (14 Feb) ── Admin UI shipped, team split, Wardley Maps adopted
Day 6 (15 Feb) ── Release pack, Explorer/Villager tracks active
```

---

## Milestones

| ID | Milestone | Date | Version | Significance |
|----|-----------|------|---------|-------------|
| M001 | Project initialised | 10 Feb | v0.1.0 | Repo, CI, Lambda scaffold |
| M002 | Architecture plans complete | 10 Feb | v0.1.2 | Two-Lambda design, data model, frontend plan |
| M003 | Infrastructure brief responses | 10 Feb | v0.2.1 | 7 deployment targets defined, 4 patterns |
| M004 | First MVP user site | 12 Feb | v0.2.15 | Upload/download working, S3 live |
| M005 | S3 persistent storage | 12 Feb | v0.2.15 | Memory-FS → S3 backend operational |
| M006 | Hash-fragment URLs | 13 Feb | v0.2.24 | One-click file access with key in URL |
| M007 | i18n system | 13 Feb | v0.2.24 | 8 languages (including Klingon) |
| M008 | Cache service integration | 13 Feb | v0.2.33 | MGraph-AI cache replaces custom analytics |
| M009 | GA removed (zero cookies) | 13 Feb | v0.2.24 | Privacy-first posture |
| M010 | Inter-Lambda communication | 14 Feb | v0.3.0 | Service Registry pattern, token validation |
| M011 | Admin UI v0.1.0 | 14 Feb | v0.3.0 | Token manager, analytics dashboard |
| M012 | 111+ tests passing | 14 Feb | v0.3.0 | Comprehensive backend coverage |
| M013 | Two-team model adopted | 14 Feb | v0.3.2 | Explorer/Villager split |
| M014 | Release pack v0.3.5 | 15 Feb | v0.3.5 | Self-contained documentation set |

---

## Decision Log

### Infrastructure Decisions (D001–D013)

| ID | Decision | Date | Rationale |
|----|----------|------|-----------|
| D001 | Two-Lambda architecture | 10 Feb | Security isolation, independent scaling |
| D002 | Lambda Function URLs (no API Gateway) | 10 Feb | Simplicity, cost, direct HTTPS |
| D003 | Memory-FS for storage abstraction | 10 Feb | Pluggable backends, testability |
| D004 | Type_Safe over Pydantic | 10 Feb | osbot ecosystem consistency |
| D005 | osbot-aws over boto3 | 10 Feb | Abstraction, reuse |
| D006 | 7 targets → 4 deployment patterns | 10 Feb | Lambda, Container, Server, CLI |
| D007 | Pytest-driven deployment | 10 Feb | Testable, repeatable, fail-safe |
| D008 | AES-256-GCM encryption | 10 Feb | Industry standard, Web Crypto API support |
| D009 | No mocks testing strategy | 10 Feb | Real implementations, in-memory stack |
| D010 | dev/qa/prod environments | 10 Feb | Standard isolation |
| D011 | FastAPI + Mangum | 10 Feb | Serverless adapter pattern |
| D012 | Python 3.12/3.13 | 10 Feb | Latest stable runtime |
| D013 | GitHub Actions CI/CD | 10 Feb | Native GitHub integration |

### UX & Feature Decisions (D014–D023)

| ID | Decision | Date | Rationale |
|----|----------|------|-----------|
| D014 | Hash-fragment for key sharing | 13 Feb | RFC 3986: fragment not sent to server |
| D015 | Rate limiting deferred | 13 Feb | Not blocking MVP |
| D016 | CORS via osbot-fast-api | 13 Feb | Framework handles it |
| D017 | i18n before new content | 13 Feb | Template system from day one |
| D018 | Themes from day one | 13 Feb | CSS variables, switchable |
| D019 | GA removed (zero cookies) | 13 Feb | Privacy-first, user trust |
| D020 | Text input mode for messages | 13 Feb | Low-effort feature, high value |
| D021 | Transparency panel | 13 Feb | Show users what server stores |
| D022 | Web Components (no Shadow DOM) | 13 Feb | CSS cascade, simplicity |
| D023 | IFD versioned paths | 13 Feb | Surgical updates, rollback |

### Cache & Analytics Decisions (D024–D030)

| ID | Decision | Date | Rationale |
|----|----------|------|-----------|
| D024 | MGraph-AI Cache Service adopted | 13 Feb | Replaces custom analytics design |
| D025 | IN_MEMORY execution mode | 13 Feb | Runs inside Lambda process |
| D026 | S3 prefix isolation | 13 Feb | Shared bucket, separate namespaces |
| D027 | TEMPORAL strategy for analytics | 13 Feb | Time-bucketed event storage |
| D028 | KEY_BASED strategy for tokens | 13 Feb | Hash-keyed token lookup |
| D029 | LETS pipeline deferred | 13 Feb | Aggregation not needed yet |
| D030 | Pulse endpoint for real-time | 13 Feb | 5-minute window traffic stats |

### Admin UI & Team Decisions (D031–D047)

| ID | Decision | Date | Rationale |
|----|----------|------|-----------|
| D031 | Admin UI as Web Components | 14 Feb | IFD methodology, consistency |
| D032 | Admin console v0.1.0 scope | 14 Feb | Token manager + analytics + system info |
| D033 | Dark theme default | 14 Feb | Admin console aesthetic |
| D034 | Event bus for component communication | 14 Feb | Loose coupling |
| D035 | Hash routing for admin SPA | 14 Feb | No server-side routing needed |
| D036 | API client class pattern | 14 Feb | Centralised fetch + auth |
| D037 | Sidebar navigation | 14 Feb | Section switching |
| D038 | Explorer/Villager team split | 14 Feb | Wardley Maps methodology |
| D039 | Explorer owns Genesis–Custom-Built | 14 Feb | Discovery and experimentation |
| D040 | IFD methodology mandatory | 14 Feb | All frontend work uses IFD |
| D041 | Handover package for 5 components | 14 Feb | Custom-Built → Product transition |
| D042 | Standing directives for team separation | 14 Feb | No feature creep in Villager |
| D043 | External design agency (Cruz & Cruz) | 14 Feb | Logo, brand, website mockups |
| D044 | Large file transfer research | 14 Feb | Chunked uploads |
| D045 | Claude bot research | 14 Feb | External partner access |
| D046 | Slack bot before WhatsApp | 14 Feb | Easier API, broader adoption |
| D047 | Unencrypted mode conditional | 14 Feb | 8 mandatory conditions from AppSec |

---

## Named Patterns

Recurring patterns observed across the project:

| ID | Pattern | Description |
|----|---------|-------------|
| P01 | Spec-first, implement-second | Architecture plans before code |
| P02 | All-roles review | Every role reviews every brief |
| P03 | Decision chaining | Decisions reference predecessors |
| P04 | In-memory testing | Full stack starts without infrastructure |
| P05 | IFD versioning | Surgical file overrides, not full rewrites |
| P06 | P3-as-P1 | Treat minor incidents like critical ones |
| P07 | 5x multiplier | 2 weeks incident work = 2 months normal ops |
| P08 | 12x velocity | AI-assisted development vs traditional |
| P09 | Wardley-guided team split | Component maturity drives team assignment |
| P10 | Standing directives | Rules that survive across sprints |

---

## Project Narrative

### Phase 1: Foundation (Days 1–2)
Architecture plans created across all roles. Two-Lambda design, Memory-FS abstraction, Type_Safe everywhere. 10 roles activated. Zero code written on day 1 — all specs.

### Phase 2: MVP (Day 3)
Full transfer cycle implemented: upload → encrypt → download → decrypt. S3 backend operational. 56 tests. First user site live at send.sgraph.ai. Pytest-driven deployment working.

### Phase 3: Feature Expansion (Days 4–5)
Hash-fragment URLs, i18n (8 languages), GA removed, cache service integration, inter-Lambda communication, admin UI shipped. 111+ tests. 14 roles active. Incident handling philosophy established.

### Phase 4: Team Split (Day 6)
Wardley Maps adopted. Explorer/Villager model. 21 components mapped. 5 components identified for handover. Design agency engaged. Release pack created.

---

## Cumulative Statistics

| Metric | Value |
|--------|-------|
| Total decisions | 47 |
| Total milestones | 14 |
| Total patterns | 10 |
| Total risks tracked | 32 |
| Versions shipped | 35+ (v0.1.0 → v0.3.5) |
| Role review documents | 80+ |
| Working days | 6 |

---

## Document Lineage

This document consolidates content from:
- `team/roles/historian/reviews/26-02-12/v0.2.15__milestone__first-mvp-user-site.md`
- `team/roles/historian/reviews/26-02-14/v0.3.0__response-to-daily-brief__14-feb.md`
- `team/roles/historian/reviews/26-02-14/v0.3.2__action-plan__explorer-villager-split.md`
